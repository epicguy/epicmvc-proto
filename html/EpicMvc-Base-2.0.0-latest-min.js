/* Copyright 2007-2014 by James Shelby, shelby (at:) dtsol.com; All rights reserved. */
Mithril=m=new function e(t,n){function o(e){return{}.toString.call(e)}function u(e){return o(e)==r}function a(e){return o(e)==i}function f(e){return typeof e=="function"}function l(e){return o(e)==s}function d(){var e=Array.prototype.slice,t=e.call(arguments,0),n=t[1]!=null&&u(t[1])&&!("tag"in t[1])&&!("subtree"in t[1]),r=n?t[1]:{},i="class"in r?"class":"className",s={tag:"div",attrs:{}},f,l=[];while(f=c.exec(t[0]))if(f[1]=="")s.tag=f[2];else if(f[1]=="#")s.attrs.id=f[2];else if(f[1]==".")l.push(f[2]);else if(f[3][0]=="["){var p=h.exec(f[3]);s.attrs[p[1]]=p[3]||(p[2]?"":!0)}l.length>0&&(s.attrs[i]=l.join(" "));var d=n?t[2]:t[1];a(d)||o(d)=="[object Arguments]"?s.children=e.call(d,0):s.children=n?t.slice(2):t.slice(1);for(var v in r)v==i?s.attrs[v]=(s.attrs[v]||"")+" "+r[v]:s.attrs[v]=r[v];return s}function v(e,s,u,c,h,d,y,E,S,x,T){h==null&&(h="");if(h.subtree==="retain")return d;var N=o(d),C=o(h);if(d==null||N!=C){if(d!=null)if(u&&u.nodes){var k=E-c,L=k+(C==i?h:d.nodes).length;g(u.nodes.slice(k,L),u.slice(k,L))}else d.nodes&&g(d.nodes,d);d=new h.constructor,d.tag&&(d={}),d.nodes=[]}if(C==i){h=w(h);var A=[],O=d.length===h.length,M=0,_=1,D=2,P=3,H={},B=[],j=!1;for(var F=0;F<d.length;F++)d[F]&&d[F].attrs&&d[F].attrs.key!=null&&(j=!0,H[d[F].attrs.key]={action:_,index:F});if(j){for(var F=0;F<h.length;F++)if(h[F]&&h[F].attrs)if(h[F].attrs.key!=null){var I=h[F].attrs.key;H[I]?H[I]={action:P,index:F,from:H[I].index,element:e.childNodes[H[I].index]||t.document.createElement("div")}:H[I]={action:D,index:F}}else B.push({index:F,element:e.childNodes[F]||t.document.createElement("div")});var q=Object.keys(H).map(function(e){return H[e]}),R=q.sort(function(e,t){return e.action-t.action||e.index-t.index}),U=d.slice();for(var F=0,z;z=R[F];F++){z.action==_&&(g(d[z.index].nodes,d[z.index]),U.splice(z.index,1));if(z.action==D){var W=t.document.createElement("div");W.key=h[z.index].attrs.key,e.insertBefore(W,e.childNodes[z.index]),U.splice(z.index,0,{attrs:{key:h[z.index].attrs.key},nodes:[W]})}z.action==P&&(e.childNodes[z.index]!==z.element&&z.element!==null&&e.insertBefore(z.element,e.childNodes[z.index]),U[z.index]=d[z.from])}for(var F=0;F<B.length;F++){var z=B[F];e.insertBefore(z.element,e.childNodes[z.index]),U[z.index]=d[z.index]}d=U,d.nodes=[];for(var F=0,X;X=e.childNodes[F];F++)d.nodes.push(X)}for(var F=0,V=0;F<h.length;F++){var $=v(e,s,d,E,h[F],d[V],y,E+M||M,S,x,T);if($===n)continue;$.nodes.intact||(O=!1),M+=a($)?$.length:1,d[V++]=$}if(!O){for(var F=0;F<h.length;F++)d[F]!=null&&(A=A.concat(d[F].nodes));for(var F=0,J;J=d.nodes[F];F++)J.parentNode!=null&&A.indexOf(J)<0&&g([J],[d[F]]);for(var F=d.nodes.length,J;J=A[F];F++)J.parentNode==null&&e.appendChild(J);h.length<d.length&&(d.length=h.length),d.nodes=A}}else if(h!=null&&C==r){if(h.tag!=d.tag||Object.keys(h.attrs).join()!=Object.keys(d.attrs).join()||h.attrs.id!=d.attrs.id)g(d.nodes),d.configContext&&f(d.configContext.onunload)&&d.configContext.onunload();if(!l(h.tag))return;var J,K=d.nodes.length===0;h.attrs.xmlns?x=h.attrs.xmlns:h.tag==="svg"?x="http://www.w3.org/2000/svg":h.tag==="math"&&(x="http://www.w3.org/1998/Math/MathML"),K?(J=x===n?t.document.createElement(h.tag):t.document.createElementNS(x,h.tag),d={tag:h.tag,children:v(J,h.tag,n,n,h.children,d.children,!0,0,h.attrs.contenteditable?J:S,x,T),attrs:m(J,h.tag,h.attrs,{},x),nodes:[J]},e.insertBefore(J,e.childNodes[E]||null)):(J=d.nodes[0],m(J,h.tag,h.attrs,d.attrs,x),d.children=v(J,h.tag,n,n,h.children,d.children,!1,0,h.attrs.contenteditable?J:S,x,T),d.nodes.intact=!0,y===!0&&J!=null&&e.insertBefore(J,e.childNodes[E]||null));if(f(h.attrs.config)){var Q=d.configContext=d.configContext||{},G=function(e,t){return function(){return e.attrs.config.apply(e,t)}};T.push(G(h,[J,!K,Q,d]))}}else if(!f(C)){var A;if(d.nodes.length===0)h.$trusted?A=b(e,E,h):(A=[t.document.createTextNode(h)],e.nodeName.match(p)||e.insertBefore(A[0],e.childNodes[E]||null)),d="string number boolean".indexOf(typeof h)>-1?new h.constructor(h):h,d.nodes=A;else if(d.valueOf()!==h.valueOf()||y===!0){A=d.nodes;if(!S||S!==t.document.activeElement)if(h.$trusted)g(A,d),A=b(e,E,h);else if(s==="textarea")e.value=h;else if(S)S.innerHTML=h;else{if(A[0].nodeType==1||A.length>1)g(d.nodes,d),A=[t.document.createTextNode(h)];e.insertBefore(A[0],e.childNodes[E]||null),A[0].nodeValue=h}d=new h.constructor(h),d.nodes=A}else d.nodes.intact=!0}return d}function m(e,t,n,r,i){for(var s in n){var o=n[s],a=r[s];if(!(s in r)||a!==o){r[s]=o;try{if(s==="config")continue;if(f(o)&&s.indexOf("on")==0)e[s]=E(o,e);else if(s==="style"&&u(o)){for(var l in o)if(a==null||a[l]!==o[l])e.style[l]=o[l];for(var l in a)l in o||(e.style[l]="")}else i!=null?s==="href"?e.setAttributeNS("http://www.w3.org/1999/xlink","href",o):s==="className"?e.setAttribute("class",o):e.setAttribute(s,o):s in e&&s!="list"&&s!="style"&&s!="form"?e[s]=o:e.setAttribute(s,o)}catch(c){if(c.message.indexOf("Invalid argument")<0)throw c}}}return r}function g(e,t){for(var n=e.length-1;n>-1;n--)e[n]&&e[n].parentNode&&(e[n].parentNode.removeChild(e[n]),t=[].concat(t),t[n]&&y(t[n]));e.length!=0&&(e.length=0)}function y(e){e.configContext&&f(e.configContext.onunload)&&e.configContext.onunload();if(e.children)if(a(e.children))for(var t=0;t<e.children.length;t++)y(e.children[t]);else e.children.tag&&y(e.children)}function b(e,n,r){var i=e.childNodes[n];if(i){var s=i.nodeType!=1,o=t.document.createElement("span");s?(e.insertBefore(o,i),o.insertAdjacentHTML("beforebegin",r),e.removeChild(o)):i.insertAdjacentHTML("beforebegin",r)}else e.insertAdjacentHTML("beforeend",r);var u=[];while(e.childNodes[n]!==i)u.push(e.childNodes[n]),n++;return u}function w(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];a(r)?t.push.apply(t,w(r)):t.push(r)}return t}function E(e,t){return function(n){n=n||event,d.redraw.strategy("diff"),d.startComputation();try{return e.call(t,n)}finally{d.endComputation()}}}function C(e){var t=T.indexOf(e);return t<0?T.push(e)-1:t}function k(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function I(e,t){var n=[];for(var r in e){var i=t?t+"["+r+"]":r,s=e[r];n.push(u(s)?I(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s))}return n.join("&")}function q(e){var t=C(e);g(e.childNodes,N[t]),N[t]=n}function R(e,t){function h(e){a=e||s,c.map(function(e){a==i&&e.resolve(l)||e.reject(l)})}function p(e,t,n,r){if((u(l)||f(l))&&f(e))try{var i=0;e.call(l,function(e){if(i++)return;l=e,t()},function(e){if(i++)return;l=e,n()})}catch(s){R.onerror(s),l=s,n()}else r()}function d(){var s;try{s=l&&l.then}catch(u){return R.onerror(u),l=u,a=r,d()}p(s,function(){a=n,d()},function(){a=r,d()},function(){try{a==n&&f(e)?l=e(l):a==r&&f(t)&&(l=t(l),a=n)}catch(u){return R.onerror(u),l=u,h()}l==o?(l=TypeError(),h()):p(s,function(){h(i)},h,function(){h(a==n&&i)})})}var n=1,r=2,i=3,s=4,o=this,a=0,l=0,c=[];o.promise={},o.resolve=function(e){return a||(l=e,a=n,d()),this},o.reject=function(e){return a||(l=e,a=r,d()),this},o.promise.then=function(e,t){var n=new R(e,t);return a==i?n.resolve(l):a==s?n.reject(l):c.push(n),n.promise}}function U(e){return e}function z(e){if(!e.dataType||e.dataType.toLowerCase()!=="jsonp"){var i=new t.XMLHttpRequest;i.open(e.method,e.url,!0,e.user,e.password),i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?e.onload({type:"load",target:i}):e.onerror({type:"error",target:i}))},e.serialize==JSON.stringify&&e.data&&e.method!="GET"&&i.setRequestHeader("Content-Type","application/json; charset=utf-8"),e.deserialize==JSON.parse&&i.setRequestHeader("Accept","application/json, text/*");if(f(e.config)){var s=e.config(i,e);s!=null&&(i=s)}return i.send(e.method=="GET"||!e.data?"":e.data),i}var n="mithril_callback_"+(new Date).getTime()+"_"+Math.round(Math.random()*1e16).toString(36),r=t.document.createElement("script");t[n]=function(i){delete t[n],t.document.body.removeChild(r),e.onload({type:"load",target:{responseText:i}})},r.onerror=function(i){return delete t[n],t.document.body.removeChild(r),e.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),!1},r.onload=function(e){return!1},r.src=e.url+(e.url.indexOf("?")>0?"&":"?")+(e.callbackKey?e.callbackKey:"callback")+"="+n+"&"+I(e.data||{}),t.document.body.appendChild(r)}function W(e,t,n){return t&&Object.keys(t).length>0&&(e.method=="GET"&&e.dataType!="jsonp"?e.url=e.url+(e.url.indexOf("?")<0?"?":"&")+I(t):e.data=n(t)),e}function X(e,t){var n=e.match(/:[a-z]\w+/gi);if(n&&t)for(var r=0;r<n.length;r++){var i=n[r].slice(1);e=e.replace(n[r],t[i]),delete t[i]}return e}var r="[object Object]",i="[object Array]",s="[object String]",c=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,h=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,p=/AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR/,S,x={appendChild:function(e){S===n&&(S=t.document.createElement("html")),t.document.documentElement&&t.document.documentElement!==e?t.document.replaceChild(e,t.document.documentElement):t.document.appendChild(e),this.childNodes=t.document.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},T=[],N={};d.render=function(e,r,i){var s=[];if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var o=C(e),u=e==t.document,a=u||e==t.document.documentElement?x:e;u&&r.tag!="html"&&(r={tag:"html",attrs:{},children:r}),N[o]===n&&g(a.childNodes),i===!0&&q(e),N[o]=v(a,null,n,n,r,N[o],!1,0,null,n,s);for(var f=0;f<s.length;f++)s[f]()},d.trust=function(e){return e=new String(e),e.$trusted=!0,e};var L=[],A=[],O=[],M=null,_=0,D=null,P=!1,H=16;d.redraw=function(){};var B=0,j=0,F=0;return d.startComputation=function(e){e&&B===F&&F++,j=Math.max(j,++B)},d.endComputation=function(){B=Math.max(B-1,0),B===0&&(j>F&&d.redraw(),F=j=0)},R.onerror=function(e){if(o(e)=="[object Error]"&&!e.constructor.toString().match(/ Error/))throw e},d.request=function(e){e.background!==!0&&d.startComputation();var t=new R,n=e.dataType&&e.dataType.toLowerCase()==="jsonp",r=e.serialize=n?U:e.serialize||JSON.stringify,i=e.deserialize=n?U:e.deserialize||JSON.parse,s=e.extract||function(e){return e.responseText.length===0&&i===JSON.parse?null:e.responseText};return e.url=X(e.url,e.data),e=W(e,e.data,r),e.onload=e.onerror=function(n){try{n=n||event;var r=(n.type=="load"?e.unwrapSuccess:e.unwrapError)||U,o=r(i(s(n.target,e)));if(n.type=="load")if(a(o)&&e.type)for(var u=0;u<o.length;u++)o[u]=new e.type(o[u]);else e.type&&(o=new e.type(o));t[n.type=="load"?"resolve":"reject"](o)}catch(n){R.onerror(n),t.reject(n)}e.background!==!0&&d.endComputation()},z(e),t.promise},d.deps=function(e){return t=e},d.deps.factory=e,d.Deferred=R,d}(typeof window!="undefined"?window:{}),typeof module!="undefined"&&module!==null&&(module.exports=m),typeof define=="function"&&define.amd&&define(function(){return m});
/*EpicCore*/(function(){"use strict";var e,t,n,r,i,s,o,u=[].slice,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n=function(t,r){var i,s,o,a,f,l,c,h,p,d,v,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K;j=!1,M=0,o={},s={},z={},O=[],X={loadDirs:{}},i={},i.nextCounter=function(){return++M},$=function(e){return{}.toString.call(e)[8]},R=function(){var e,t,n,i,s,o,a,f,l,c,h,p;n=arguments[0],f=2<=arguments.length?u.call(arguments,1):[],o="O",e="A",c="U",l="S",t=0,s={},s[o]=function(e,t){var n,s;if($(t)!==o)return r;for(s in t)n=i(e[s],t[s]),n!==r&&(e[s]=n);return r},s[e]=function(t,n){var s,o,u,a,f;$(n)!==e&&reutrn(r);for(o=a=0,f=n.length;a<f;o=++a)u=n[o],s=i(t[o],u),s!==r&&(t[o]=s);return r},s[c]=function(t,n){var r;switch($(n)){case o:r={},s[o](r,n);break;case e:r=[],s[e](r,n);break;default:r=n}return r},s[l]=function(e,t){return $(t)in s?t:e},i=function(e,n){var r,i;return t++,i=$(e),i in s||(i=l),r=s[i](e,n),t--,r};for(h=0,p=f.length;h<p;h++)a=f[h],i(n,a);return n},i.login=function(){var e,t,n;n=[];for(e in z)t=z[e],n.push(typeof t.eventLogin=="function"?t.eventLogin():void 0);return n},i.logout=function(e,t){var n=this;if(j!==!1){setTimeout(function(){return i.logout(e,t)},100);return}return e?d(e,t).then(function(){return P()}):P()},P=function(){var e,t,n;n=[];for(e in z){t=z[e];if(typeof t.eventLogout=="function"?!t.eventLogout():!void 0)continue;delete modelState[e],n.push(delete z[e])}return n},i.run=function(e,t,n){var r;O=e,N(),R(X,t),i.oLoader=new s[X.loader](O),r=i.oLoader.D_loadAsync(),r.then(function(){return B(),F(),typeof n=="function"&&n(),i.App().go(p.go),i.oRender=new s[X.render]})},d=function(e,t){return j!==!1&&typeof X.c1=="function"&&X.c1(),j=e,m.startComputation(),_(e,t,i.App().getStepPath()).then(function(e){var t,n,r,s;i.App().setIssues(e[0]),i.App().setMessages(e[1]),j=!1,n={};for(t in z)r=z[t],r.saveState!=null&&(s=r.saveState())&&(n[t]=s);return m.endComputation()})},V=function(e){var t,n,r,i;e!=null&&(n=e),i=[];for(t in z)i.push(typeof (r=z[t]).restoreState=="function"?r.restoreState(n[t]):void 0);return i},p={frames:{},modals:{},layout:"default",go:"default//"},c={},a={},l={"default":{start:"default",TRACKS:{"default":{start:"default",STEPS:{"default":{}}}}}},h={},f={},C=function(e){},N=function(){var e,t,r,s,o,u,d,v,m,g,y,b;for(d=0,m=O.length;d<m;d++){r=O[d],n=(y=i["app$"+r])!=null?y:{},n.STEPS&&R(l["default"].TRACKS["default"].STEPS,n.STEPS),n.TRACKS&&R(l["default"].TRACKS,n.TRACKS),t={SETTINGS:p,MACROS:c,ACTIONS:a,FLOWS:l,MODELS:h,OPTIONS:X};for(r in t)o=t[r],R(o,n[r])}for(u in h){s=h[u];if(s.fists){b=s.fists;for(v=0,g=b.length;v<g;v++)e=b[v],f[e]=u}}q()},k=function(e,t){return e in h||config.a1(e),t in h[e]||X.a2(e,t),h[e][t]},b=function(e){return f[e]},y=function(e,t,n,r,i){var s,o,u,a,f,c,h,p,d;o=l[e];if(o){if(t&&(a=(f=o.TRACKS)!=null?f[t]:void 0)!=null){if(n&&(u=(c=a.STEPS)!=null?c[n]:void 0)!=null&&(s=(h=u[r])!=null?h[i]:void 0)!=null)return s;if((s=(p=a[r])!=null?p[i]:void 0)!=null)return s}if((s=(d=o[r])!=null?d[i]:void 0)!=null)return s}return null},g=function(e,t,n,r){var i,s,o,u,a,f;s=l[e];if(s){if(t&&(u=(a=s.TRACKS)!=null?a[t]:void 0)!=null){if(n&&(o=(f=u.STEPS)!=null?f[n]:void 0)!=null&&(i=o[r])!=null)return i;if((i=u[r])!=null)return i}if((i=s[r])!=null)return i}return null},w=function(e){return l[e]},x=function(e,t){return l[e].TRACKS[t]},E=function(e,t,n){return l[e].TRACKS[t].STEPS[n]},A=function(e){return w(e).start},L=function(e,t){return x(e,t).start},v=function(e,t){var n;return(n=y(e[0],e[1],e[2],"ACTIONS",t))!=null?n:a[t]},S=function(e,t,n,r){var i;return t?(i=g(t,n,r!=null?r:false,e))!=null?i:p[e]:p[e]},T=function(e,t,n){var r;return r=R({},l[e].v,l[e].TRACKS[t].v,l[e].TRACKS[t].STEPS[n].v),r},q=function(){var e,t,n;n=[];for(t in h)e=h[t],n.push(function(e,t){return i[e]=function(n,s,o){var u,a,f;return a=t.inst,a in z||(u=t["class"],i.Model[u]==null&&X.m1(e,t),z[a]=new i.Model[u](e,t.options),a in z&&z[a].restoreState(z[a])),f=z[a],n===r?f:s===r?f.getTable(n):f.action(n,s,o)}}(t,e));return n},_=function(e,t,n){var r;return r=new m.Deferred,r.resolve(J(e,t,n)),r.promise},J=function(t,n,r){var s,o,u,a,f,l,h,p;return f=":doAction("+t+")",h=new e("App"),p=new e("App"),l=R({},n),s=v(r,t),s==null?(_log2("WARNING","No app. entry for action_token ("+t+") on path ("+r+")"),[h,p]):(u=function(e){var s,u,a,f,d,v,g,y,b,w,E,S,x,T,N,C;e.go!=null&&i.App().go(e.go),g=function(){switch($(e.pass)){case"A":return e.pass;case"S":return e.pass.split(",");default:return[]}}();for(S=0,x=g.length;S<x;S++)v=g[S],v in n||_log2("WARNING","Action ("+t+") request data is missing param "+v,n,e,r);T=e.set;for(v in T)b=T[v],l[v]=b;if(e["do"]!=null){f=!/[.]/.test(e["do"]);if(f){c[e["do"]]||typeof X.ca2=="function"&&X.ca2(t,r,e);if(f)return o(c[e["do"]])}N=e["do"].split("."),E=N[0],w=N[1],w=w!=null?w:t,u=new m.Deferred,y={},a=new i.Issue(E,w),d=new i.Issue(E,w),s={d:u,r:y,i:a,m:d},i[E](s,w,l),C=s.r;for(v in C)b=C[v],l[v]=b;return h.addObj(s.i),p.addObj(s.m)}},a=function(e){var t,n,r,i,s,u,a,f,c,h,p;i=null,c=(f=e.next)!=null?f:[];for(u=0,a=c.length;u<a;u++){t=c[u];if(t.when==="default"){i=t;break}if(typeof t.when=="string"&&t.when===((h=l.success)!=null?h:l.ok)){i=t;break}r=!0,p=t.when;for(n in p){s=p[n];if(l[n]!==s){r=!1;break}}if(r){i=t;break}}i&&o(i)},o=function(e){return u(e),a(e)},o(s),[h,p])},D={},H={},B=function(){var e,t,n,r,s,o,u;for(r=0,s=O.length;r<s;r++)t=O[r],e=(o=i["fist$"+t])!=null?o:{},e.FIELDS&&R(D,e.FIELDS),e.FISTS&&R(H,e.FISTS);for(t in H)n=H[t],n.fistNm=t;u=[];for(t in D)n=D[t],u.push(n.fieldNm=t);return u},I={},F=function(){var e,t,n,r,s,o;o=[];for(n=0,r=O.length;n<r;n++)t=O[n],e=(s=i["issue$"+t])!=null?s:{},o.push(R(I,e));return o},K={type_oau:$,Model:o,Extra:s,option:X,action:d,merge:R,appconfs:O,appGetF:w,appGetT:x,appGetS:E,appStartT:A,appStartS:L,appFindAction:v,appGetSetting:S,appGetVars:T,appFist:b,fieldDef:D,fistDef:H,issueMap:I,oModel:z};for(U in K)W=K[U],i[U]=W;return i},e=function(){function e(e,t){this.t_view=e,this.t_action=t,this.issue_list=[]}return e.Make=function(t,n,r){var i;return i=new e(t),i.add(n,r),i},e.prototype.add=function(e,t){switch(typeof t){case"undefined":t=[];break;case"string":t=[t]}return this.issue_list.push({token:e,more:t,t_view:this.t_view,t_action:this.t_action})},e.prototype.addObj=function(e){var t,n,r,i,s,o,u;if(!(typeof e=="object"&&"issue_list"in e))return;s=e.issue_list;for(r=0,i=s.length;r<i;r++)t=s[r],n=E.merge({},t),(o=n.t_view)==null&&(n.t_view=this.t_view),(u=n.t_action)==null&&(n.t_action=this.t_action),this.issue_list.push(n)},e.prototype.count=function(){return this.issue_list.length},e.prototype.asTable=function(){var e,t,n,r,i;e=[],i=this.issue_list;for(n=0,r=i.length;n<r;n++)t=i[n],e.push({token:t.token,title:""+t.t_view+"#"+t.t_action+"#"+t.token+"#"+t.more.join(","),issue:this.map(t.t_view,t.t_action,t.token,t.more)});return e},e.prototype.map=function(e,t,n,r){var i,s,o,u,a,f,l,c,h;i=E.issueMap;if(typeof i!="object")return"(no map) "+e+"#"+t+"#"+n+"#"+r.join(",");s=[],e in i&&(t in i[e]&&s.push(i[e][t]),"default"in i[e]&&s.push(i[e]["default"])),"default"in i&&(t in i["default"]&&s.push(i["default"][t]),"default"in i["default"]&&s.push(i["default"]["default"]));for(a=0,l=s.length;a<l;a++){u=s[a],h=u||[];for(f=0,c=h.length;f<c;f++){o=h[f];if(n.match(o[0]))return this.doMap(n,o[1],r,n)}}return"(no match)"+e+"#"+t+"#"+n+"#"+r.join(",")},e.prototype.doMap=function(e,t,n){var r;return r=t.replace(/%([0-9])(?::([0-9]))?%/g,function(t,r,i,s){return r==="0"?e:i?n[r-1]||n[i-1]||"":n[r-1]||""}),r},e}(),t=function(){function e(e,t,n){this.view_nm=e,this.options=t,this._ModelJS={ss:n||!1},this.restoreState(!1)}return e.prototype.getTable=function(e){return this.loadTableIf(e),this.Table[e]},e.prototype.loadTableIf=function(e){if(!(e in this.Table))return this.loadTable(e)},e.prototype.restoreState=function(e){var t;if(this._ModelJS.ss!=null)for(t in this._ModelJS.ss)delete this[t];return this._ModelJS.ss!=null&&E.merge(this,this._ModelJS.ss),e&&E.merge(this,e),this.Table={}},e.prototype.saveState=function(){var e,t,n;t=this._ModelJS.ss;if(!t)return!1;n={};for(e in t)this[e]!==t[e]&&(n[e]=this[e]);return E.merge({},n)},e.prototype.invalidateTables=function(e,t){var n,r,i,s;t==null&&(t=[]),e===!0&&(e=function(){var e;e=[];for(r in this.Table)a.call(t,r)>=0||e.push(r);return e}.call(this)),n=[];for(i=0,s=e.length;i<s;i++)r=e[i],r in this.Table&&(n.push(r),delete this.Table[r]);return E.View().invalidateTables(this.view_nm,e,n)},e}(),s=typeof window!="undefined"?window:{},s.EpicMvc=s.E=new n(s),o={Issue:e,ModelJS:t};for(i in o)r=o[i],s.E[i]=r;s._log2=function(){},typeof module!="undefined"&&module!==null&&(module.exports=s.E),typeof define=="function"&&define.amd&&define(function(){return s.E})}).call(this);
/*Base/app.coffee*/(function(){E.app$Base={MANIFEST:{Extra:["LoadStrategy","RenderStrategy","dataAction"],Model:["App","View","Fist"]},OPTIONS:{loader:"LoadStrategy$Base",render:"RenderStrategy$Base",dataAction:"dataAction$Base"},MODELS:{App:{"class":"App$Base",inst:"iBaseApp"},View:{"class":"View$Base",inst:"iBaseView"},Fist:{"class":"Fist$Base",inst:"iBaseFist"}}}}).call(this);
/*Base/Model/View.coffee*/(function(){"use strict";var e,t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=function(e){function n(e,r){this.T_if=t(this.T_if,this),this.T_page=t(this.T_page,this),this.handleIt=t(this.handleIt,this),this.doDefer=t(this.doDefer,this);var i,s,o;n.__super__.constructor.call(this,e,r),i=E.appGetSetting("frames"),this.frames=function(){var e,t,n,r;n=function(){var e;e=[];for(o in i)e.push(o);return e}().sort(),r=[];for(e=0,t=n.length;e<t;e++)s=n[e],r.push(i[s]);return r}(),this.frames.push("X"),this.did_run=!1,this.in_run=!1,window.oE=this,this.defer_it_cnt=0,this.start=!1}return r(n,e),n.prototype.nest_up=function(e){return this.defer_it_cnt===0&&(this.in_run&&BLOWUP(),this.in_run=!0,this.defer_it=new m.Deferred),this.defer_it_cnt++},n.prototype.nest_dn=function(e){this.defer_it_cnt>0&&this.defer_it_cnt--;if(this.defer_it_cnt===0)return this.in_run=!1,this.defer_it.resolve(this.defer_content)},n.prototype.run=function(){var e,t,n,r,i,s,o;return i="R",s=E.App().getStepPath(),e=s[0],r=s[1],n=s[2],t=E.appGetSetting("layout",e,r,n),this.page_name=(o=E.appGetS(e,r,n).page)!=null?o:n,this.did_run=!0,this.frames[this.frames.length-1]=t,this.frame_inx=0,this.resetInfo(),this.nest_up(i),this.defer_content=this.kids([["page",{}]]),this.nest_dn(i),this.defer_it.promise},n.prototype.resetInfo=function(){return this.info_foreach={},this.info_parts=[{}],this.info_if_nms={},this.info_defer=[[]]},n.prototype.saveInfo=function(){var e,t,n,r,i,s;e={},r={},s=this.info_foreach;for(t in s)n=s[t],e[t]=n.dyn,r[t]=n.row._COUNT;return i=E.merge({},{info_foreach:{dyn:e,row_num:r},info_parts:this.info_parts}),i},n.prototype.restoreInfo=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;this.resetInfo(),y=e.info_foreach.dyn,b=[];for(o in y){f=y[o],r=f[0],i=f[1],n=f[2],t=[],u=E[r]();for(m=0,g=n.length;m<g;m++)d=n[m],l=d[0],c=d[1],t.push(d),c in this.info_foreach?a=this.info_foreach[c].row:(t.length===1?v=u.getTable(l):v=a[l],p=e.info_foreach.row_num[c],h=E.merge({},v[p]),this.info_foreach[c]={dyn:[r,i,t],row:h},a=h);b.push(s=E.merge([],e.info_parts))}return b},n.prototype.getTable=function(e){switch(e){case"If":return[this.info_if_nms];case"Part":return this.info_parts.slice(-1);default:return[]}},n.prototype.invalidateTables=function(e,t,n){if(!this.did_run||!n.length)return;m.startComputation(),m.endComputation()},n.prototype.wrap=function(e,t,n,r,i){var s,o=this;return s={defer:r},t.config=function(e,t,n){var i,u,a,f;a=s.defer,f=[];for(i=0,u=a.length;i<u;i++)r=a[i],f.push(o.doDefer(r,e));return f},t["data-part"]=e,"dynamic"in t?{tag:t.dynamic,attrs:t,children:n}:n?i?n:{tag:"div",attrs:t,children:n}:""},n.prototype.doDefer=function(e,t){var n=this;return"A"===E.type_oau(e.defer)?(_log2("WARNING","Got an array for defer",e.defer),"WAS-ARRAY"):e.func?e.func(t,e.attrs):e.defer.then(function(r){e.func=new Function("el","attrs",r),n.doDefer(e,t)})},n.prototype.handleIt=function(e){return typeof e=="function"&&(e=e()),e},n.prototype.formatFromSpec=function(e,t,n){var r,i,s,o,u;switch(t){case void 0:return e;case"":return n?typeof (o=window.EpicMvc).custom_filter=="function"?o.custom_filter(e,n):void 0:e;case"count":return e!=null?e.length:void 0;case"bool":return e?!0:!1;case"bytes":return window.bytesToSize(Number(e));case"uriencode":return encodeURIComponent(e);case"esc":return window.EpicMvc.escape_html(e);case"quo":return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"');case"1":return String(e)[0];case"lc":return String(e).toLowerCase();case"ucFirst":return s=String(s).toLowerCase(),s.slice(0,1).toUpperCase()+s.slice(1);default:return t[0]==="?"?(u=t.slice(1).split("?"),r=u[0],i=u[1],(e?r:i!=null?i:"").replace(new RegExp("[%]","g"),e)):e}},n.prototype.v3=function(e,t,n,r,i){var s;return s=E[e](t)[0],this.formatFromSpec(s[n],r,i)},n.prototype.v2=function(e,t,n,r,i){var s;return s=this.info_foreach[e].row[t],i!=null&&(s=s[i]),this.formatFromSpec(s,n,r)},n.prototype.weed=function(e){var t,n,r;t={};for(n in e)r=e[n],n[0]!=="-"?t[n]=r:r&&(t[n.slice(1)]=r);return t},n.prototype.kids=function(e){var t,n,r,i,s,o,u,a=this;s="K",i=[];for(n=o=0,u=e.length;o<u;n=++o)r=e[n],"A"===E.type_oau(r)?(i.push(n),t=this["T_"+r[0]](r[1],r[2]),(t!=null?t.then:void 0)?(this.nest_up(s),function(e){return t.then(function(t){return i[e]=t,a.nest_dn(s)})}(n)):i[n]=t):i.push(r);return i},n.prototype.loadPartAttrs=function(e){var t,n,r;n={};for(t in e){r=e[t];if("data-e-"!==t.slice(0,7))continue;n[t.slice(7)]=r}return n},n.prototype.T_page=function(e){var t,n,r;return this.frame_inx<this.frames.length?(t=E.oLoader.d_layout(n=this.frames[this.frame_inx++]),r=(this.frame_inx<this.frames.length?"frame":"layout")+"/"+n):(t=E.oLoader.d_page(n=this.page_name),r="page/"+n),this.piece_handle(r,e!=null?e:{},t)},n.prototype.T_part=function(e){var t,n;return n=e.part,t=E.oLoader.d_part(n),this.piece_handle(n,e,t,!0)},n.prototype.piece_handle=function(e,t,n,r){var i,s,o,u;return(n!=null?n.then:void 0)?this.D_piece(e,t,n,r):(s=n.content,i=n.can_componentize,this.info_parts.push(this.loadPartAttrs(t)),this.info_defer.push([]),s=this.handleIt(s),o=this.info_defer.pop(),i||t.dynamic||o.length||!r?(o.length&&!i&&!t.dynamic&&_log2("WARNING: DEFER logic in ("+e+"); wrapping DIV tag."),u=this.wrap(e,t,s,o,i)):u=s,u)},n.prototype.D_piece=function(e,t,n,r){var i,s,o,u=this;return o="P",this.nest_up(o+e),s=this.saveInfo(),i=n.then(function(n){var i;return(n!=null?n.then:void 0)&&BLOWUP(),u.restoreInfo(s),i=u.piece_handle(e,t,n,r),u.nest_dn(o+e),i}),i},n.prototype.T_defer=function(e,t){var n;return n=this.handleIt(t),this.info_defer[this.info_defer.length-1].push({attrs:e,func:new Function("el","attrs",n)}),""},n.prototype.T_if_true=function(e,t){return this.info_if_nms[e.name]?this.handleIt(t()):""},n.prototype.T_if_false=function(e,t){return this.info_if_nms[e.name]?"":this.handleIt(t)},n.prototype.T_if=function(e,t){var n,r,s,o,u,a,f,l;r=!1,n=!1;if("val"in e)if("eq"in e)e.val===e.eq&&(n=!0);else if("ne"in e)e.val!==e.ne&&(n=!0);else if("in_list"in e){if(f=e.val,i.call(e.in_list.split(","),f)>=0)n=!0}else r=!0;else"set"in e?n=e.set?!0:!1:"not_set"in e?n=e.not_set?!1:!0:"table_is_not_empty"in e?(a=e.table_is_not_empty,l=a.split("/"),s=l[0],o=l[1],u=this._accessModelTable(a,!1)[0],u.length&&(n=!0)):r=!0;return r&&console.log("ISSUE T_if",e),"name"in e&&(this.info_if_nms[e.name]=n),n&&t?this.handleIt(t):""},n.prototype._accessModelTable=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;return l=e.split("/"),s=l[0],u=l[1],s in this.info_foreach?(f=this.info_foreach[s].row[u],c=this.info_foreach[s].dyn,r=c[0],i=c[1],n=c[2]):(o=E[s](),f=o.getTable(u),h=[s,u,[]],r=h[0],i=h[1],n=h[2]),f.length===0?[f,u,s,u,o]:(a=u,t&&(a=t),n.push([u,a]),this.info_foreach[a]={dyn:[r,i,n]},[f,a,s,u,o])},n.prototype.T_foreach=function(e,t){var n,r,i,s,o,u,a,f,l;l=this._accessModelTable(e.table,e.alias),u=l[0],s=l[1];if(u.length===0)return"";i=[],r="limit"in e?Number(e.limit)-1:u.length;for(n=a=0,f=u.length;a<f;n=++a)o=u[n],o=u[n],this.info_foreach[s].row=o,this.info_foreach[s].count=n,i.push(this.handleIt(t));return delete this.info_foreach[s],i},n.prototype.T_fist=function(e,t){var n,r,i,s,o,u,a,f;return n=(u=E.fistDef[e.fist].event)!=null?u:"Fist",i=e.fist+(e.row!=null?":"+e.row:""),a=this._accessModelTable(n+"/"+i,e.alias),s=a[0],r=a[1],this.info_foreach[r].row=s[0],t?this.handleIt(t):((f=e.part)==null&&(e.part=typeof (o=E.fistDef[e.fist]).part=="function"?o.part("fist_default"):void 0),this.T_part(e))},n}(E.ModelJS),E.Model.View$Base=e}).call(this);
/*Base/Model/Fist.coffee*/(function(){"use strict";var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=function(e){function t(e,n){this.fist={},t.__super__.constructor.call(this,e,n)}return n(t,e),t.prototype.event=function(e,n,r,i,s){var o,u,a,f,l,c,h;e!=="Fist"&&BLOWUP(),u=this._getFist(r,s.row),i&&(o=u.ht[i]);switch(n){case"keyup":case"change":o.type==="yesno"&&(s.val===o.cdata[0]?s.val=o.cdata[1]:s.val=o.cdata[0]);if(o.hval!==s.val){a=o.issue,o.hval=s.val,l=E.fistH2H(o,o.hval),E.fistVAL(o,l);if(n==="change"||a!==o.issue)f=!0}break;case"blur":h=o.hval,c=o.issue,o.hval=E.fistH2H(o,o.hval),E.fistVAL(o,o.hval);if(h!==o.hval||c!==o.issue)f=!0;break;case"focus":u.fnm!==i&&(u.fnm=i);break;default:return t.__super__.event.call(this,e,n,r,i,s)}f&&(s.async!==!0?this.invalidateTables([u.rnm]):delete this.Table[u.rnm])},t.prototype.fistValidate=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;h=e.r,a=e.i,l=e.m,u=this._getFist(t,n),i=0,p=u.ht;for(o in p)s=p[o],!0!==E.fistVAL(s,s.hval)&&i++;if(i)f=!0,h.success="FAIL",h.errors=i;else{h.success="SUCCESS",r=h[u.nm]={},d=u.db;for(c in d)s=d[c],r[c]=E.fistH2D(s)}f===!0&&this.invalidateTables([u.rnm])},t.prototype.loadTable=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;h=e.split(":"),i=h[0],f=h[1],u=this._getFist(i,f),n={},t=[],r=!1,p=u.sp.FIELDS;for(a=l=0,c=p.length;l<c;a=++l)o=p[a],s=u.ht[o],f=this._makeField(u,s,a,f),f.req&&(r=!0),n[o]=[f],t.push(f);return this.Table[e]=[{Field:[n],Control:t,any_req:r}]},t.prototype._makeField=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d;o={is_first:n===0,focus:e.fnm===t.nm,yes_val:"X","default":"",width:"",size:"",issue:"",value:"",selected:!1,name:t.nm},u=E.merge(o,t),c=u.type.split(":"),u.type=c[0],i=c[1],u.id="U"+E.nextCounter(),u.value=(h=t.hval)!=null?h:u["default"],u.type==="yesno"&&((p=u.cdata)==null&&(u.cdata=["1","0"]),u.yes_val=String(u.cdata[0]),u.value===u.yes_val?u.selected=!0:u.value=u.cdata[1]),t.issue&&(u.issue=t.issue.asTable()[0].issue);if(u.type==="radio"||u.type==="pulldown"){s=this._getChoices(i,e,t,r),a=[],f="";for(n=l=0,d=s.options.length;0<=d?l<d:l>d;n=0<=d?++l:--l)f=s.values[n]===String(u.value),a.push({option:s.options[n],value:s.values[n],selected:f}),u.Choice=a}return u},t.prototype._getFist=function(e,t){var n,r,i,s,o,u,a,f,l,c;u=e+(t?":"+t:"");if(u in this.fist)s=this.fist[u];else{s=this.fist[u]={rnm:u,nm:e,row:t,ht:{},db:{},st:"new",sp:E.fistDef[e]},c=s.sp.FIELDS;for(f=0,l=c.length;f<l;f++)i=c[f],r=E.merge({},E.fieldDef[i],{nm:i,fistNm:e,row:t}),s.ht[i]=s.db[r.db_nm]=r}if(s.st==="new"){n=E[E.appFist(e)]().fistGetValues(e,t);for(o in n)a=n[o],r=s.db[o],r.hval=E.fistD2H(r,a);s.st="loaded"}return s},t.prototype._getChoices=function(e,t,n){var r,i,s,o,u;switch(e){case"array":r={options:[],values:[]},u=n.cdata;for(s=0,o=u.length;s<o;s++)i=u[s],typeof i=="object"?(r.options.push(String(i[1])),r.values.push(String(i[0]))):(r.options.push(String(i)),r.values.push(String(i)));return r;case"custom":return E[E.appFist(t.nm)]().fistGetChoices(t.nm,n.nm,t.row);default:return BROKEN()}},t}(E.ModelJS),E.fistH2H=function(e,t){var n,r,i,s,o,u;t=E.fistH2H$pre(t),u=(s=(o=e.h2h)!=null?o.split(/[:,]/):void 0)!=null?s:[];for(r=0,i=u.length;r<i;r++)n=u[r],t=E["fistH2H$"+n](t);return t},E.fistH2H$pre=function(e){return e},E.fistH2D=function(e){return e.h2d?E["fistH2D$"+e.h2d](e,e.hval):e.hval},E.fistD2H=function(e,t){return e.d2h?E["fistD2H$"+e.d2h](e,t):t},E.fistVAL=function(e,t){var n,r,i,s,o;return delete e.issue,n=!0,t.length===0?e.req===!0&&(n=e.req_text?["FIELD_EMPTY_TEXT",e.nm,(i=e.label)!=null?i:e.nm,e.req_text]:["FIELD_EMPTY",e.nm,(s=e.label)!=null?s:e.nm]):e.validate&&(n=E["fistVAL$"+e.validate](e,t),n===!1&&(n="FIELD_ISSUE"+(e.issue_text?"_TEXT":""))),n!==!0&&(r=n,"A"!==E.type_oau(r)&&(r=[r,e.nm,(o=e.label)!=null?o:e.nm,e.issue_text]),e.issue=new E.Issue(e.fistNm,e.nm),e.issue.add(r[0],r.slice(1))),n===!0},E.Model.Fist$Base=e}).call(this);
/*Base/Model/App.coffee*/(function(){"use strict";var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=function(e){function t(e,n){var r;r={f:null,t:null,s:null,sp:[]},this.issues=new E.Issue(this.view_nm),this.messages=new E.Issue(this.view_nm),t.__super__.constructor.call(this,e,n,r)}return n(t,e),t.prototype.goTo=function(e,t,n){var r,i;r=""+this.f+"/"+this.t+"/"+this.s;if(!e||E.appGetF(e)==null)i=E.appGetSetting("go").split("/"),e=i[0],t=i[1],n=i[2];else if(t==null||E.appGetT(e,t)==null)t=E.appStartT(e),n=E.appStartS(e,t);else if(n==null||E.appGetS(e,t,n)==null)n=E.appStartS(e,t);this.f=e,this.t=t,this.s=n;if(r!==""+this.f+"/"+this.t+"/"+this.s)return this.invalidateTables(["V"])},t.prototype.go=function(e){var t,n,r,i,s,o,u;n=e.split("/"),o=[this.f,this.t,this.s];for(t=i=0,s=o.length;i<s;t=++i){r=o[t];if((u=n[t])!=null?!!u.length:!!void 0)break;n[t]=r}return this.goTo(n[0],n[1],n[2])},t.prototype.appGet=function(e){return E.appGetSetting(e,this.f,this.t,this.s)},t.prototype.getStepPath=function(){return[this.f,this.t,this.s]},t.prototype.action=function(e,n,r){var i,s,o,u;u=e.r,i=e.i,s=e.m;switch(n){case"path":return this.go(r.path);case"push":return this.sp.push([this.f,this.t,this.s]);case"pop":if(this.sp.length)return o=this.sp.pop(),this.goTo(o[0],o[1],o[2]);break;case"add_message":return s.add(r.type,r.msgs);case"add_issue":return i.add(r.type,r.msgs);case"clear":return this.issues=new E.Issue(this.view_nm),this.messages=new E.Issue(this.view_nm),this.invalidateTables(["Issue","Message"]);default:return t.__super__.action.call(this,e,n,r)}},t.prototype.setIssues=function(e){return(e!=null?e.count():void 0)!==0&&this.issues.addObj(e),this.invalidateTables(["Issue"])},t.prototype.setMessages=function(e){return(e!=null?e.count():void 0)!==0&&this.messages.addObj(e),this.invalidateTables(["Message"])},t.prototype.loadTable=function(e){var n;n=E["issues$"+this.appGet("group")],this.Table[e]=function(){switch(e){case"Message":return this.messages.asTable(n);case"Issue":return this.issues.asTable(n);case"V":return[E.appGetVars(this.f,this.t,this.s)];default:return t.__super__.loadTable.call(this,e)}}.call(this)},t}(E.ModelJS),E.Model.App$Base=e}).call(this);
/*Base/Extra/dataAction.coffee*/(function(){var e,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;typeof (h=E.option).activity=="function"&&h.activity(e),r=t.split(","),i=!0,f=!1;for(p=0,d=r.length;p<d;p++)a=r[p],v=a.split(":"),c=v[0],l=v[1],s=v[2],u=v[3],o=v[4],l||(l=c,c="click"),c==="event"&&E.event(l,e,s,u,o,n),i&&c===e&&(c==="click"&&(f=!0),i=!1,function(e){return setTimeout(function(){return E.action(e,n)},5)}(l));return f},E.Extra.dataAction$Base=e,E.event=function(e,n,r,i,s,o){var u,a;if(s!=="all"){u=s.split("-");if(t.call(u,n)<0)return}return e==="Fist"&&(e=(a=E.fistDef[r].event)!=null?a:e),E[e]().event(e,n,r,i,o)}}).call(this);
/*Base/Extra/LoadStrategy.coffee*/(function(){var e;e=function(){function e(e){var t;this.reverse_packages=function(){var n,r,s;s=[];for(t=n=r=e.length-1;r<=0?n<=0:n>=0;t=r<=0?++n:--n)s.push(e[t]);return s}()}return e.prototype.getArtifact=function(e,t){var n,r,i,s,o,u,a,f;r=!1,o=this.reverse_packages;for(i=0,s=o.length;i<s;i++){n=o[i],r=(u=(a=E["view$"+n])!=null?(f=a[t])!=null?f[e]:void 0:void 0)!=null?u:!1;if(r!==!1)break}return r===!1&&console.log("NO FILE FOUND! "+e),r},e.prototype.D_loadAsync=function(){var e;return e=new m.Deferred,e.resolve(),e.promise},e.prototype.fist=function(e){return BROKEN(),E["fist$"+e]},e.prototype.d_layout=function(e){return this.getArtifact(e,"Layout")},e.prototype.d_page=function(e){return this.getArtifact(e,"Page")},e.prototype.d_part=function(e){return this.getArtifact(e,"Part")},e}(),E.Extra.LoadStrategy$Base=e}).call(this);
/*Base/Extra/RenderStrategy.coffee*/(function(){"use strict";var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};e=13,t=function(){function t(){this.m_redraw=n(this.m_redraw,this),this.onPopState=n(this.onPopState,this),this.handleEvent=n(this.handleEvent,this);var e,t=this;this.very_first=!0,this.was_popped=!1,this.was_modal=!1,this.unloadMsgs={},this.baseUrl=window.document.location.pathname,this.baseId="epic-new-page",this.modalId="epic-new-modal",this.basePage='<div id="'+this.baseId+'"></div><div id="'+this.modalId+'"></div>',e=document.createElement("div"),e.id=this.baseId,document.body.appendChild(e),setTimeout(function(){return t.onPopState(!0)},0),window.onpopstate=this.onPopState,this.redraw_guard=!1,m.redraw=this.m_redraw,this.init(),!0}return t.prototype.handleEvent=function(t){var n,r,i,s,o,u,a,f,l,c,h;t==null&&(t=window.event),f=t.type,f==="keyup"&&t.keyCode===e&&(f="enter"),a=t.target;if(a===window)return!1;while(a.tagName!=="BODY"&&!(r=a.getAttribute("data-e-action")))a=a.parentElement;if(!r)return!1;i={},n=a.attributes;for(s=c=0,h=n.length;0<=h?c<h:c>h;s=0<=h?++c:--c){if("data-e-"!==n[s].name.slice(0,7))continue;if("action"===(o=n[s].name.slice(7)))continue;i[o]=n[s].value}return l=a.value,i.val=l,u=E.Extra[E.option.dataAction](f,r,i),u&&t.preventDefault(),!1},t.prototype.init=function(){var e,t,n,r,i;t=["click","change","dblclick","keyup","blur","focus"],i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(document.body.addEventListener(e,this.handleEvent,!0));return i},t.prototype.UnloadMessage=function(e,t){var n,r,i;return t?this.unloadMsgs[e]=t:delete this.unloadMsgs[e],n=function(){var e,t;e=this.unloadMsgs,t=[];for(r in e)i=e[r],t.push(i);return t}.call(this),n=n.length?n.join("\n"):null,window.onbeforeunload=function(){return n}},t.prototype.onPopState=function(e){if(e===!0||!e.state)if(this.was_popped||!this.very_first)return;this.was_popped=!0,this.very_first?E.action("browser_hash",{hash:location.hash.substr(1)}):(e.state&&E.setModelState(e.state),BROKEN()||this.render())},t.prototype.m_redraw=function(){var e=this;if(this.redraw_guard!==!1)return;return this.redraw_guard=!0,E.View().run().then(function(t){return e.render(t,"TODO","TODO",!1),e.redraw_guard=!1})},t.prototype.render=function(e,t,n,r){var i;this.was_modal&&(BROKEN(),m.render(document.getElementById(this.modalId),m())),r?(BROKEN(),m.render(i=document.getElementById(this.modalId),this.modalView(e))):m.render(i=document.getElementById(this.baseId),m("div",{},e)),this.was_modal=r,this.was_popped=!1,this.very_first=!1},t.prototype.handleRenderState=function(e,t){var n,r,i,s,o;if(!e)return;n=this.very_first?"":"action-"+t,i=E.getDomCache(),i===!1&&(i=E.getExternalUrl()),i!==!1&&(n=i),r=E.getModelState(),this.very_first||e==="replace"?typeof (s=window.history).replaceState=="function"&&s.replaceState(r,n,"#"+n):!this.was_popped&&e===!0&&(typeof (o=window.history).pushState=="function"&&o.pushState(r,n,"#"+n),window.document.title=n)},t}(),E.Extra.RenderStrategy$Base=t}).call(this);
E.view$Base={
Layout: {
"default":{preloaded:1,can_componentize:false,defer:0,content:function(){return oE.kids([['page',{}]])}}}, Page: {
"default":{preloaded:1,can_componentize:true,defer:0,content:function(){return [{tag:'b',attrs:{},children:['A Base Page']}]}}}, Part: {
}};

