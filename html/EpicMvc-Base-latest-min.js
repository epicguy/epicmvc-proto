/* Copyright 2007-2018 by James Shelby, shelby (at:) dtsol.com; All rights reserved. */
/* VERSION 2.4.1 */
var m=function e(t,n){var r="[object Object]",i="[object Array]",l="[object String]",a="function";var o={}.toString;var s=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,f=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/;var d=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;var c=function(){};var u,h,v,g;function m(e){u=e.document;h=e.location;g=e.cancelAnimationFrame||e.clearTimeout;v=e.requestAnimationFrame||e.setTimeout}m(t);function p(){var e=[].slice.call(arguments);var t=e[1]!=null&&o.call(e[1])===r&&!("tag"in e[1]||"view"in e[1])&&!("subtree"in e[1]);var n=t?e[1]:{};var a="class"in n?"class":"className";var d={tag:"div",attrs:{}};var c,u=[];if(o.call(e[0])!=l)throw new Error("selector in m(selector, attrs, children) should be a string");while(c=s.exec(e[0])){if(c[1]===""&&c[2])d.tag=c[2];else if(c[1]==="#")d.attrs.id=c[2];else if(c[1]===".")u.push(c[2]);else if(c[3][0]==="["){var h=f.exec(c[3]);d.attrs[h[1]]=h[3]||(h[2]?"":true)}}var v=t?e.slice(2):e.slice(1);if(v.length===1&&o.call(v[0])===i){d.children=v[0]}else{d.children=v}for(var g in n){if(n.hasOwnProperty(g)){if(g===a&&n[g]!=null&&n[g]!==""){u.push(n[g]);d.attrs[g]=""}else d.attrs[g]=n[g]}}if(u.length>0)d.attrs[a]=u.join(" ");return d}function y(e,t,s,f,h,v,g,m,C,E,k){try{if(h==null||h.toString()==null)h=""}catch(e){h=""}if(h.subtree==="retain")return v;var A=o.call(v),O=o.call(h);if(v==null||A!==O){if(v!=null){if(s&&s.nodes){var M=m-f;var T=M+(O===i?h:v.nodes).length;N(s.nodes.slice(M,T),s.slice(M,T))}else if(v.nodes)N(v.nodes,v)}v=new h.constructor;if(v.tag)v={};v.nodes=[]}if(O===i){for(var j=0,B=h.length;j<B;j++){if(o.call(h[j])===i){h=h.concat.apply([],h);j--;B=h.length}}var S=[],$=v.length===h.length,L=0;var R=1,D=2,H=3;var I={},_=false;for(var j=0;j<v.length;j++){if(v[j]&&v[j].attrs&&v[j].attrs.key!=null){_=true;I[v[j].attrs.key]={action:R,index:j}}}var F=0;for(var j=0,B=h.length;j<B;j++){if(h[j]&&h[j].attrs&&h[j].attrs.key!=null){for(var G=0,B=h.length;G<B;G++){if(h[G]&&h[G].attrs&&h[G].attrs.key==null)h[G].attrs.key="__mithril__"+F++}break}}if(_){var U=false;if(h.length!=v.length)U=true;else for(var j=0,q,J;q=v[j],J=h[j];j++){if(q.attrs&&J.attrs&&q.attrs.key!=J.attrs.key){U=true;break}}if(U){for(var j=0,B=h.length;j<B;j++){if(h[j]&&h[j].attrs){if(h[j].attrs.key!=null){var V=h[j].attrs.key;if(!I[V])I[V]={action:D,index:j};else I[V]={action:H,index:j,from:I[V].index,element:v.nodes[I[V].index]||u.createElement("div")}}}}var W=[];for(var Y in I)W.push(I[Y]);var z=W.sort(w);var Q=new Array(v.length);Q.nodes=v.nodes.slice();for(var j=0,X;X=z[j];j++){if(X.action===R){N(v[X.index].nodes,v[X.index]);Q.splice(X.index,1)}if(X.action===D){var Z=u.createElement("div");Z.key=h[X.index].attrs.key;e.insertBefore(Z,e.childNodes[X.index]||null);Q.splice(X.index,0,{attrs:{key:h[X.index].attrs.key},nodes:[Z]});Q.nodes[X.index]=Z}if(X.action===H){if(e.childNodes[X.index]!==X.element&&X.element!==null){e.insertBefore(X.element,e.childNodes[X.index]||null)}Q[X.index]=v[X.from];Q.nodes[X.index]=X.element}}v=Q}}for(var j=0,ee=0,B=h.length;j<B;j++){var te=y(e,t,v,m,h[j],v[ee],g,m+L||L,C,E,k);if(te===n)continue;if(!te.nodes.intact)$=false;if(te.$trusted){L+=(te.match(/<[^\/]|\>\s*[^<]/g)||[0]).length}else L+=o.call(te)===i?te.length:1;v[ee++]=te}if(!$){for(var j=0,B=h.length;j<B;j++){if(v[j]!=null)S.push.apply(S,v[j].nodes)}for(var j=0,ne;ne=v.nodes[j];j++){if(ne.parentNode!=null&&S.indexOf(ne)<0)N([ne],[v[j]])}if(h.length<v.length)v.length=h.length;v.nodes=S}}else if(h!=null&&O===r){var re=[],ie=[];while(h.view){var le=h.view.$original||h.view;var ae=p.redraw.strategy()=="diff"&&v.views?v.views.indexOf(le):-1;var oe=ae>-1?v.controllers[ae]:new(h.controller||c);var V=h&&h.attrs&&h.attrs.key;h=P==0||v&&v.controllers&&v.controllers.indexOf(oe)>-1?h.view(oe):{tag:"placeholder"};if(h.subtree==="retain")return v;if(V){if(!h.attrs)h.attrs={};h.attrs.key=V}if(oe.onunload)K.push({controller:oe,handler:oe.onunload});re.push(le);ie.push(oe)}if(!h.tag&&ie.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");if(!h.attrs)h.attrs={};if(!v.attrs)v.attrs={};var se=Object.keys(h.attrs);var fe=se.length>("key"in h.attrs?1:0);if(h.tag!=v.tag||se.sort().join()!=Object.keys(v.attrs).sort().join()||h.attrs.id!=v.attrs.id||h.attrs.key!=v.attrs.key||p.redraw.strategy()=="all"&&(!v.configContext||v.configContext.retain!==true)||p.redraw.strategy()=="diff"&&v.configContext&&v.configContext.retain===false){if(v.nodes.length)N(v.nodes);if(v.configContext&&typeof v.configContext.onunload===a)v.configContext.onunload();if(v.controllers){for(var j=0,oe;oe=v.controllers[j];j++){if(typeof oe.onunload===a)oe.onunload({preventDefault:c})}}}if(o.call(h.tag)!=l)return;var ne,de=v.nodes.length===0;if(h.attrs.xmlns)E=h.attrs.xmlns;else if(h.tag==="svg")E="http://www.w3.org/2000/svg";else if(h.tag==="math")E="http://www.w3.org/1998/Math/MathML";if(de){if(h.attrs.is)ne=E===n?u.createElement(h.tag,h.attrs.is):u.createElementNS(E,h.tag,h.attrs.is);else ne=E===n?u.createElement(h.tag):u.createElementNS(E,h.tag);v={tag:h.tag,attrs:fe?x(ne,h.tag,h.attrs,{},E):h.attrs,children:h.children!=null&&h.children.length>0?y(ne,h.tag,n,n,h.children,v.children,true,0,h.attrs.contenteditable?ne:C,E,k):h.children,nodes:[ne]};if(ie.length){v.views=re;v.controllers=ie;for(var j=0,oe;oe=ie[j];j++){if(oe.onunload&&oe.onunload.$old)oe.onunload=oe.onunload.$old;if(P&&oe.onunload){var ce=oe.onunload;oe.onunload=c;oe.onunload.$old=ce}}}if(v.children&&!v.children.nodes)v.children.nodes=[];if(h.tag==="select"&&"value"in h.attrs)x(ne,h.tag,{value:h.attrs.value},{},E);e.insertBefore(ne,e.childNodes[m]||null)}else{ne=v.nodes[0];if(fe)x(ne,h.tag,h.attrs,v.attrs,E);v.children=y(ne,h.tag,n,n,h.children,v.children,false,0,h.attrs.contenteditable?ne:C,E,k);v.nodes.intact=true;if(ie.length){v.views=re;v.controllers=ie}if(g===true&&ne!=null)e.insertBefore(ne,e.childNodes[m]||null)}if(typeof h.attrs["config"]===a){var ue=v.configContext=v.configContext||{};var he=function(e,t){return function(){return e.attrs["config"].apply(e,t)}};k.push(he(h,[ne,!de,ue,v]))}}else if(typeof h!=a){var S;if(v.nodes.length===0){if(h.$trusted){S=b(e,m,h)}else{S=[u.createTextNode(h)];if(!e.nodeName.match(d))e.insertBefore(S[0],e.childNodes[m]||null)}v="string number boolean".indexOf(typeof h)>-1?new h.constructor(h):h;v.nodes=S}else if(v.valueOf()!==h.valueOf()||g===true){S=v.nodes;if(!C||C!==u.activeElement){if(h.$trusted){N(S,v);S=b(e,m,h)}else{if(t==="textarea")e.value=h;else if(C)C.innerHTML=h;else{if(S[0].nodeType===1||S.length>1){N(v.nodes,v);S=[u.createTextNode(h)]}e.insertBefore(S[0],e.childNodes[m]||null);S[0].nodeValue=h}}}v=new h.constructor(h);v.nodes=S}else v.nodes.intact=true}return v}function w(e,t){return e.action-t.action||e.index-t.index}function x(e,t,n,i,l){for(var s in n){var f=n[s];var d=i[s];if(!(s in i)||d!==f){i[s]=f;try{if(s==="config"||s=="key")continue;else if(typeof f===a&&s.indexOf("on")===0){e[s]=E(f,e)}else if(s==="style"&&f!=null&&o.call(f)===r){for(var c in f){if(d==null||d[c]!==f[c])e.style[c]=f[c]}for(var c in d){if(!(c in f))e.style[c]=""}}else if(l!=null){if(s==="href")e.setAttributeNS("http://www.w3.org/1999/xlink","href",f);else if(s==="className")e.setAttribute("class",f);else e.setAttribute(s,f)}else if(s in e&&!(s==="list"||s==="style"||s==="form"||s==="type"||s==="width"||s==="height")){if(t!=="input"||e[s]!==f)e[s]=f}else e.setAttribute(s,f)}catch(e){if(e.message.indexOf("Invalid argument")<0)throw e}}else if(s==="value"&&t==="input"&&e.value!=f){e.value=f}}return i}function N(e,t){for(var n=e.length-1;n>-1;n--){if(e[n]&&e[n].parentNode){try{e[n].parentNode.removeChild(e[n])}catch(e){}t=[].concat(t);if(t[n])C(t[n])}}if(e.length!=0)e.length=0}function C(e){if(e.configContext&&typeof e.configContext.onunload===a){e.configContext.onunload();e.configContext.onunload=null}if(e.controllers){for(var t=0,n;n=e.controllers[t];t++){if(typeof n.onunload===a)n.onunload({preventDefault:c})}}if(e.children){if(o.call(e.children)===i){for(var t=0,r;r=e.children[t];t++)C(r)}else if(e.children.tag)C(e.children)}}function b(e,t,n){var r=e.childNodes[t];if(r){var i=r.nodeType!=1;var l=u.createElement("span");if(i){e.insertBefore(l,r||null);l.insertAdjacentHTML("beforebegin",n);e.removeChild(l)}else r.insertAdjacentHTML("beforebegin",n)}else e.insertAdjacentHTML("beforeend",n);var a=[];while(e.childNodes[t]!==r){a.push(e.childNodes[t]);t++}return a}function E(e,t){return function(n){n=n||event;p.redraw.strategy("diff");p.startComputation();try{return e.call(t,n)}finally{F()}}}var k;var A={appendChild:function(e){if(k===n)k=u.createElement("html");if(u.documentElement&&u.documentElement!==e){u.replaceChild(e,u.documentElement)}else u.appendChild(e);this.childNodes=u.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]};var O=[],M={};p.render=function(e,t,r){var i=[];if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var l=T(e);var a=e===u;var o=a||e===u.documentElement?A:e;if(a&&t.tag!="html")t={tag:"html",attrs:{},children:t};if(M[l]===n)N(o.childNodes);if(r===true)G(e);M[l]=y(o,null,n,n,t,M[l],false,0,null,n,i);for(var s=0,f=i.length;s<f;s++)i[s]()};p.trust=function(e){e=new String(e);e.$trusted=true;return e};function T(e){var t=O.indexOf(e);return t<0?O.push(e)-1:t}function j(e){var t=function(){if(arguments.length)e=arguments[0];return e};t.toJSON=function(){return e};return t}p.prop=j;var B=[],S=[],$=[],L=null,R=0,D=null,H=null,I=false,_,K=[];p.redraw=function(e){};p.redraw.strategy=p.prop();var P=0;p.startComputation=function(){P++};p.endComputation=function(){P=Math.max(P-1,0);if(P===0)p.redraw()};var F=function(){if(p.redraw.strategy()=="none"){P--;p.redraw.strategy("diff")}else p.endComputation()};function G(e){var t=T(e);N(e.childNodes,M[t]);M[t]=n}return p}(typeof window!="undefined"?window:{});if(typeof module!="undefined"&&module!==null&&module.exports)module.exports=m;else if(typeof define==="function"&&define.amd)define(function(){return m});

/*EpicCore*/(function(){"use strict";var t,n,e,i,r,u,o,f=[].slice,l=[].indexOf||function(t){for(var n=0,e=this.length;n<e;n++){if(n in this&&this[n]===t)return n}return-1};t=typeof exports!=="undefined"&&exports!==null?require("E"):window.E={};i=function(e){var r,u,o,l,s,a,c,p,h,d,v,S,g,T,w,_,A,b,y,C,E,M,k,O,R,x,I,P,K,L,F,D,j,J,G,N,$,U,V,W,q,B,z,H,Q,X,Y;j=false;I=0;u={};r={};W={};U={};x=[];B={event:function(){},loadDirs:{}};t.nextCounter=function(){return++I};t.opt=function(t){return $(B,t)};t.camelCase=function(t,n){if(n==null){n="-"}return t.toLowerCase().replace(new RegExp(n+"(.)","g"),function(t,n){return n.toUpperCase()})};Q=function(t){return{}.toString.call(t)[8]};$=function(){var t,n,i,r,u,o,l,s,a,c,p,h;i=arguments[0],c=2<=arguments.length?f.call(arguments,1):[];s="O";t="A";h="U";p="S";n=0;u={};u[s]=function(t,n){var i,u;if(Q(n)!==s){return e}for(u in n){i=r(t[u],n[u]);if(i!==e){t[u]=i}}return e};u[t]=function(n,i){var u,o,f,l,s;if(Q(i)!==t){return e}for(o=f=0,l=i.length;f<l;o=++f){s=i[o];u=r(n[o],s);if(u!==e){n[o]=u}}return e};u[h]=function(n,e){var i;switch(Q(e)){case s:i={};u[s](i,e);break;case t:i=[];u[t](i,e);break;default:i=e}return i};u[p]=function(t,n){if(Q(n)!==h){return n}return t};r=function(t,e){var i,r;n++;r=Q(t);if(!(r in u)){r=p}i=u[r](t,e);n--;return i};for(o=0,l=c.length;o<l;o++){a=c[o];r(i,a)}return i};t.login=function(){var t,n,e;e=[];for(t in W){n=W[t];e.push(typeof n.eventLogin==="function"?n.eventLogin():void 0)}return e};t.logout=function(n,e){if(j!==false){setTimeout(function(i){return function(){return t.logout(n,e)}}(this),100);return}if(n){return d(n,e).then(function(){return K()})}else{return K()}};K=function(){var t,n,e;e=[];for(t in W){n=W[t];if(!(typeof n.eventLogout==="function"?n.eventLogout():void 0)){continue}delete U[t];e.push(delete W[t])}return e};t.run=function(n,e,i){var u;x=n;$(B,e);t.oLoader=new r[B.loader](x);u=t.oLoader.D_loadAsync();u.then(function(){C();$(B,e);N();F();Y();J();if(typeof i==="function"){i()}t.App().go(h.go);return t.oRender=new r[B.render]})};H=function(t){var n,e,i;if(t!=null){U=t}i=[];for(e in W){i.push(typeof(n=W[e]).restoreState==="function"?n.restoreState(U[e]):void 0)}return i};D=function(){var t,n,e;U={};for(t in W){n=W[t];if(n.saveState!=null&&(e=n.saveState())){U[t]=e}}return U};h={frames:{},modals:{},layout:"default",go:"default//"};c={};l={};a={default:{start:"default",TRACKS:{default:{start:"default",STEPS:{default:{}}}}}};p={};s={};E=function(t){};C=function(){var n,e,r,u,o,f,d,v,S,g,T,w;for(r=0,o=x.length;r<o;r++){d=x[r];i=(g=t["app$"+d])!=null?g:{};if(i.STEPS){$(a["default"].TRACKS["default"].STEPS,i.STEPS)}if(i.TRACKS){$(a["default"].TRACKS,i.TRACKS)}e={SETTINGS:h,MACROS:c,ACTIONS:l,FLOWS:a,MODELS:p,OPTIONS:B};for(d in e){S=e[d];$(S,i[d])}}for(w in p){v=p[w];if(v.fists){T=v.fists;for(u=0,f=T.length;u<f;u++){n=T[u];s[n]=w}}}};M=function(t,n){return p[t][n]};T=function(t){return s[t]};g=function(t,n,e,i,r){var u,o,f,l,s,c,p,h,d;o=a[t];if(o){if(n&&(l=(s=o.TRACKS)!=null?s[n]:void 0)!=null){if(e&&(f=(c=l.STEPS)!=null?c[e]:void 0)!=null){if((u=(p=f[i])!=null?p[r]:void 0)!=null){return u}}if((u=(h=l[i])!=null?h[r]:void 0)!=null){return u}}if((u=(d=o[i])!=null?d[r]:void 0)!=null){return u}}return null};S=function(t,n,e,i){var r,u,o,f,l,s;u=a[t];if(u){if(n&&(f=(l=u.TRACKS)!=null?l[n]:void 0)!=null){if(e&&(o=(s=f.STEPS)!=null?s[e]:void 0)!=null){if((r=o[i])!=null){return r}}if((r=f[i])!=null){return r}}if((r=u[i])!=null){return r}}return null};w=function(t){return a[t]};b=function(t,n){return a[t].TRACKS[n]};_=function(t,n,e){return a[t].TRACKS[n].STEPS[e]};R=function(t){return w(t).start};O=function(t,n){return b(t,n).start};v=function(t,n){var e;return(e=g(t[0],t[1],t[2],"ACTIONS",n))!=null?e:l[n]};A=function(t,n,e,i){var r;if(!n){return h[t]}return(r=S(n,e,i!=null?i:false,t))!=null?r:h[t]};y=function(t,n,e){var i;i=$({},a[t].v,a[t].TRACKS[n].v,a[t].TRACKS[n].STEPS[e].v);return i};k=function(t,n){var e,i,r,u,o,f,l,s;for(i in a){e=a[i];r=e.TRACKS;for(s in r){l=r[s];u=l.STEPS;for(f in u){o=u[f];if(o[t]===n){return[i,s,f]}}if(l[t]===n){return[i,s,l.start]}}if(e[t]===n){return[i,e.start,a[e.start].start]}}return false};N=function(){var n,i,r;i=[];for(r in p){n=p[r];i.push(function(n,i){return t[n]=function(r,u,o){var f,l;f=i.inst;if(!(f in W)){W[f]=new t.Model[i["class"]](n,i.options);if(f in U){W[f].restoreState(U[f])}}l=W[f];if(r===e){return l}if(u===e){return l.getTable(r)}return l.action(r,u,o)}}(r,n))}return i};d=function(n,e){var i,r,u;j=n;m.startComputation();r=function(){return m.endComputation()};u=function(n){t.App().setIssues(n[0]);t.App().setMessages(n[1]);return j=false};try{i=o(n,e,t.App().getStepPath())}finally{if((i!=null?i.then:void 0)!=null){i.then(u).then(r,function(t){r();throw t})}else{setTimeout(r,0);if(i!=null){u(i)}}}};o=function(e,i,r){var u,o,f,l,s,a,p,h,d,S;d=new n("App");S=new n("App");h=$({},i);u=v(r,e);if(u==null){return[d,S]}l=function(n){var i,r,u,o,l,s,a,p,v,g,T,w,_,m,A,b,y,C,E,M,k,O,R,x,I,P,K,L;M=["fist","clear"];for(g=0,w=M.length;g<w;g++){L=M[g];if(!(L in n)){continue}l=n[L];s=(k=t.fistDef[l].event)!=null?k:"Fist";if(L==="clear"){t[s]().fistClear(l,h.row)}else{t[s]().fistValidate(E={},l,h.row);t.merge(h,E);if(E.fist$success!=="SUCCESS"){return}}}y=function(){switch(Q(n.pass)){case"A":return n.pass;case"S":return n.pass.split(",");default:return[]}}();for(v=T=0,_=y.length;T<_;v=++T){b=y[v];if(!(b.indexOf(":")>-1)){continue}O=b.split(":"),A=O[0],r=O[1];h[r]=h[A];y[v]=A}R=n.set;for(b in R){I=R[b];h[b]=I}if(n["do"]!=null){p=n["do"].indexOf(".")<0;if(p){return f(c[n["do"]])}x=n["do"].split("."),K=x[0],P=x[1];P=P?P:e;C=Promise.resolve();E={};a=new t.Issue(K,P);m=new t.Issue(K,P);u={p:C,r:E,i:a,m:m};i=t[K](u,P,h);o=function(){var t;t=u.r;for(b in t){I=t[b];h[b]=I}d.addObj(u.i);return S.addObj(u.m)};if((i!=null?i.then:void 0)!=null){return i.then(o)}else{return o(i)}}};s=function(n){var e,i,r,u,o,l,s,a,c,p;if(n.go!=null){t.App().go(n.go)}l=null;if(n.next==null){n.next=[]}if("A"!==Q(n.next)){n.next=[n.next]}s=n.next;for(i=0,u=s.length;i<u;i++){e=s[i];if(!("when"in e)){l=e;break}if(e.when==="default"){l=e;break}if(typeof e.when==="string"&&e.when===((a=h.success)!=null?a:h.ok)){l=e;break}o=true;c=e.when;for(r in c){p=c[r];if(h[r]!==p){o=false;break}}if(o){l=e;break}}if(l){return f(l)}};f=function(t){var n,e;n=l(t);e=function(){return s(t)};if((n!=null?n.then:void 0)!=null){return n.then(e)}else{return e(n)}};o=f(u);a=function(){return[d,S]};p=function(t){throw new Error("BLOWUP:"+t.message)};if((o!=null?o.then:void 0)!=null){return o.then(a,p)}else{return a(o)}};P={};L={};F=function(){var n,e,i,r,u,o,f;for(e=0,i=x.length;e<i;e++){r=x[e];n=(o=t["fist$"+r])!=null?o:{};if(n.FIELDS){$(P,n.FIELDS)}if(n.FISTS){$(L,n.FISTS)}}for(r in L){u=L[r];u.fistNm=r}f=[];for(r in P){u=P[r];f.push(u.fieldNm=r)}return f};G={};J=function(){var n,e,i,r,u,o;o=[];for(e=0,i=x.length;e<i;e++){r=x[e];n=(u=t["issues$"+r])!=null?u:{};o.push($(G,n))}return o};X={};Y=function(){var n,e,i,r,u,o;u=[];for(n=0,e=x.length;n<e;n++){i=x[n];o=(r=t["wist$"+i])!=null?r:{};u.push($(X,o))}return u};z={type_oau:Q,Model:u,Extra:r,option:B,action:d,merge:$,getModelState:D,setModelState:H,appGetF:w,appGetT:b,appGetS:_,appStartT:R,appStartS:O,appFindAction:v,appGetSetting:A,appGetVars:y,appFist:T,appFindAttr:S,appSearchAttr:k,fieldDef:P,fistDef:L,issueMap:G,wistDef:X};for(V in z){q=z[V];t[V]=q}};n=function(){function n(t,n){this.t_view=t;this.t_action=n;this.issue_list=[]}n.Make=function(t,e,i){var r;r=new n(t);r.add(e,i);return r};n.prototype.add=function(t,n){switch(typeof n){case"undefined":n=[];break;case"string":n=[n]}return this.issue_list.push({token:t,more:n,t_view:this.t_view,t_action:this.t_action})};n.prototype.addObj=function(n){var e,i,r,u,o;if(typeof n!=="object"||!("issue_list"in n)){return}o=n.issue_list;for(i=0,r=o.length;i<r;i++){e=o[i];u=t.merge({},e);if(u.t_view==null){u.t_view=this.t_view}if(u.t_action==null){u.t_action=this.t_action}this.issue_list.push(u)}};n.prototype.count=function(){return this.issue_list.length};n.prototype.asTable=function(){var t,n,e,i,r;t=[];r=this.issue_list;for(e=0,i=r.length;e<i;e++){n=r[e];t.push({view:n.t_view,action:n.t_action,token:n.token,title:n.t_view+"#"+n.t_action+"#"+n.token+"#"+n.more.join(","),issue:this.map(n.t_view,n.t_action,n.token,n.more)})}return t};n.prototype.map=function(n,e,i,r){var u,o,f,l,s,a,c,p,h;s=t.issueMap;if(typeof s!=="object"){return"(no map) "+n+"#"+e+"#"+i+"#"+r.join(",")}a=[];if(n in s){if(e in s[n]){a.push(s[n][e])}if("default"in s[n]){a.push(s[n]["default"])}}if("default"in s){if(e in s["default"]){a.push(s["default"][e])}if("default"in s["default"]){a.push(s["default"]["default"])}}for(u=0,f=a.length;u<f;u++){h=a[u];c=h||[];for(o=0,l=c.length;o<l;o++){p=c[o];if(i.match(p[0])){return this.doMap(i,p[1],r,i)}}}return"(no match)"+n+"#"+e+"#"+i+"#"+r.join(",")};n.prototype.doMap=function(t,n,e){var i;i=n.replace(/%([0-9])(?::([0-9]))?%/g,function(n,i,r,u){if(i==="0"){return t}if(r){return e[i-1]||e[r-1]||""}else{return e[i-1]||""}});return i};return n}();e=function(){function n(t,n,e){this.view_nm=t;this.options=n;this._ModelJS={ss:e||false};this.restoreState(false)}n.prototype.getTable=function(t){this.loadTableIf(t);return this.Table[t]};n.prototype.loadTableIf=function(t){if(!(t in this.Table)){return this.loadTable(t)}};n.prototype.restoreState=function(n){var e;if(this._ModelJS.ss!=null){for(e in this._ModelJS.ss){delete this[e]}}if(this._ModelJS.ss!=null){t.merge(this,this._ModelJS.ss)}if(n){t.merge(this,n)}return this.Table={}};n.prototype.saveState=function(){var n,e,i;e=this._ModelJS.ss;if(!e){return false}i={};for(n in e){if(this[n]!==e[n]){i[n]=this[n]}}return t.merge({},i)};n.prototype.invalidateTables=function(n,e){var i,r,u,o;if(e==null){e=[]}if(n===true){n=function(){var t;t=[];for(o in this.Table){if(!(l.call(e,o)>=0)){t.push(o)}}return t}.call(this)}i=[];for(r=0,u=n.length;r<u;r++){o=n[r];if(o in this.Table){i.push(o);delete this.Table[o]}}return t.View().invalidateTables(this.view_nm,n,i)};return n}();i();o={Issue:n,ModelJS:e};for(u in o){r=o[u];t[u]=r}t.log=function(){}}).call(this);

/*Base/app*/(function(){"use strict";var s;s=function(s,e,a,t){if(s==="click"||s==="enter"||s==="keyup"&&e.keyCode===27){if(!/event:Tab:Drop:/.test(t)){return E.Tab().event("Tab",s,"Drop","_CLEARED",{})}}};E.app$Base={OPTIONS:{render:"RenderStrategy$Base",dataAction:"dataAction$Base",event:s},MODELS:{App:{class:"App$Base",inst:"iBaseApp"},View:{class:"View$Base",inst:"iBaseView"},Fist:{class:"Fist$Base",inst:"iBaseFist"},Tab:{class:"Tab$Base",inst:"iBaseTab"},Wist:{class:"Wist$Base",inst:"iBaseWist"}}}}).call(this);

/*Base/Model/App*/(function(){"use strict";var t,s=function(t,s){for(var i in s){if(e.call(s,i))t[i]=s[i]}function r(){this.constructor=t}r.prototype=s.prototype;t.prototype=new r;t.__super__=s.prototype;return t},e={}.hasOwnProperty;t=function(t){s(e,t);function e(t,s){var i;i={f:null,t:null,s:null,sp:[]};e.__super__.constructor.call(this,t,s,i);this.clear()}e.prototype.clear=function(){var t,s;if(((t=this.issues)!=null?t.count:void 0)!==0){this.issues=new E.Issue(this.view_nm);this.invalidateTables(["Issue"])}if(((s=this.messages)!=null?s.count:void 0)!==0){this.messages=new E.Issue(this.view_nm);return this.invalidateTables(["Message"])}};e.prototype.goTo=function(t,s,e){var i;i=this.f+"/"+this.t+"/"+this.s;this.f=t;this.t=s;this.s=e;if(i!==this.f+"/"+this.t+"/"+this.s){return this.invalidateTables(["V"])}};e.prototype.go=function(t){var s,e,i,r;e=t.split("/"),s=e[0],r=e[1],i=e[2];if(!s){s=this.f;if(!r){r=this.t}}if(!r){r=E.appStartT(s)}if(!i){i=E.appStartS(s,r)}return this.goTo(s,r,i)};e.prototype.appGet=function(t){return E.appGetSetting(t,this.f,this.t,this.s)};e.prototype.getStepPath=function(){return[this.f,this.t,this.s]};e.prototype.action=function(t,s,i){var r,a,u,n,o,p,h,l;p=t.r,a=t.i,u=t.m;switch(s){case"path":return this.go(i.path);case"push":return this.sp.push([this.f,this.t,this.s]);case"pop":if(this.sp.length){o=this.sp.pop();return this.goTo(o[0],o[1],o[2])}break;case"add_message":return u.add(i.type,i.msgs);case"add_issue":return a.add(i.type,i.msgs);case"clear":return this.clear();case"route":n=E.appSearchAttr("route",i.route);if(n===false){return p.success="FAIL"}else{this.goTo(n[0],n[1],n[2]);return p.success="SUCCESS"}break;case"parse_hash":h=i.hash.split("~"),l=h[0],r=h[1];if(r!=null){return E.merge(p,{type:"code",route:l,code:r})}else{n=E.appSearchAttr("route",l);if(n===false){p.success="FAIL";return E.merge(p,{type:"route",route:l})}else{return E.merge(p,{type:"path",route:l,path:n.join("/")})}}break;default:return e.__super__.action.call(this,t,s,i)}};e.prototype.setIssues=function(t){if((t!=null?t.count():void 0)!==0){this.issues.addObj(t)}return this.invalidateTables(["Issue"])};e.prototype.setMessages=function(t){if((t!=null?t.count():void 0)!==0){this.messages.addObj(t)}return this.invalidateTables(["Message"])};e.prototype.loadTable=function(t){var s;s=E["issues$"+this.appGet("group")];this.Table[t]=function(){switch(t){case"Message":return this.messages.asTable(s);case"Issue":return this.issues.asTable(s);case"V":return[E.appGetVars(this.f,this.t,this.s)];default:return e.__super__.loadTable.call(this,t)}}.call(this)};return e}(E.ModelJS);E.Model.App$Base=t}).call(this);

/*Base/Model/Fist*/(function(){"use strict";var t,e=function(t,e){for(var s in e){if(i.call(e,s))t[s]=e[s]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++){if(e in this&&this[e]===t)return e}return-1};t=function(t){e(i,t);function i(t,e){this.fist={};i.__super__.constructor.call(this,t,e)}i.prototype.event=function(t,e,s,n,r){var l,f,u,a,o,h,c,p;if(t!=="Fist"){BLOWUP()}f=this._getFist(s,r.row,true);if(f===false){return}if(n){l=f.ht[n]}switch(e){case"keyup":case"change":if(l.type==="yesno"){if(r.val===false){r.val=l.cdata[1]}else{r.val=l.cdata[0]}}if(l.hval!==r.val){u=l.issue;l.hval=r.val;h=E.fistH2H(l,l.hval);E.fistVAL(l,h);if(e==="change"||u!==l.issue){a=true}}break;case"blur":p=l.hval;c=l.issue;l.hval=E.fistH2H(l,l.hval);E.fistVAL(l,l.hval);if(p!==l.hval||c!==l.issue){a=true}break;case"focus":if(f.fnm!==n){f.fnm=n}break;default:return i.__super__.event.call(this,t,e,s,n,r)}o=this.confirm(f,l,e);if(a||o){if(r.async!==true){this.invalidateTables([f.rnm])}else{delete this.Table[f.rnm]}}};i.prototype.confirm=function(t,e,i){var s,n,r,l,f,u,a;if(!(e.confirm!=null||e.confirm_src!=null)){return false}r=e.confirm_src!=null?e:t.ht[e.confirm];n=t.ht[r.confirm_src];if(r.issue!=null){if(n.issue!=null){delete n.issue;return true}return false}a=n.hval;if(a===""&&n.fieldNm!==e.fieldNm){return false}u=n.issue;f=E.fistH2H(r,a);l=E.fistH2H(r,r.hval);if(f===l){delete n.issue}else{s="FIELD_ISSUE"+(n.issue_text?"_TEXT":"");this._makeIssue(s,n)}return u!==n.issue};i.prototype._makeIssue=function(t,e){var i,s;s=t;if("A"!==E.type_oau(s)){s=[s,e.nm,(i=e.label)!=null?i:e.nm,e.issue_text]}e.issue=new E.Issue(e.fistNm,e.nm);return e.issue.add(s[0],s.slice(1))};i.prototype.fistWipe=function(t){var e,i,n;if("A"!==E.type_oua(t)){t=t.split(",")}e=false;for(i in this.fist){if(n=i.split(":")[0],s.call(t,n)>=0){e=true;delete this.fist[i]}}if(e){return this.invalidateTables(true)}};i.prototype.fistClear=function(t,e){var i;i=t+((e!=null?e.length:void 0)?":"+e:"");if(i in this.fist){delete this.fist[i];return this.invalidateTables([i])}};i.prototype.fistValidate=function(t,e,i){var s,n,r,l,f,u,a,o,h,c,p,d;h=t;f=this._getFist(e,i);n=0;c=f.ht;for(l in c){r=c[l];u=E.fistH2H(r,r.hval);if(u!==r.hval){r.hval=u;a=true}if(true!==E.fistVAL(r,r.hval)){n++}}p=f.ht;for(l in p){r=p[l];if(r.confirm!=null){if(true===this.confirm(f,r,"fistValidate")){n++}}}if(n){a=true;h.fist$success="FAIL";h.fist$errors=n}else{h.fist$success="SUCCESS";s=h[f.nm]={};d=f.db;for(o in d){r=d[o];s[o]=E.fistH2D(r,r.hval)}}if(a===true){this.invalidateTables([f.rnm])}};i.prototype.loadTable=function(t){var e,i,s,n,r,l,f,u,a,o,h,c,p,d;c=t.split(":"),n=c[0],r=c[1];u=this._getFist(n,r);i={};e=[];s=false;p=u.sp.FIELDS;for(o=a=0,h=p.length;a<h;o=++a){f=p[o];l=u.ht[f];d=this._makeField(u,l,o,d);if(d.req){s=true}i[f]=[d];e.push(d)}return this.Table[t]=[{Field:[i],Control:e,any_req:s}]};i.prototype._makeField=function(t,e,i,s){var n,r,l,f,u,a,o,h,c;l={is_first:i===0,focus:t.fnm===e.nm,yes_val:"X",req:false,default:"",width:"",size:"",issue:"",value:"",selected:false,name:e.nm};f=E.merge(l,e);a=f.type.split(":"),f.type=a[0],n=a[1];f.value=e.hval;if(f.type==="yesno"){f.yes_val=String(f.cdata[0]);if(f.value===f.yes_val){f.selected=true}else{f.value=f.cdata[1]}}if(e.issue){f.issue=e.issue.asTable()[0].issue}if(f.type==="radio"||f.type==="pulldown"){r=this._getChoices(n,t,e,s);h=[];c="";for(i=u=0,o=r.options.length;0<=o?u<o:u>o;i=0<=o?++u:--u){c=r.values[i]===String(f.value);h.push({option:r.options[i],value:r.values[i],selected:c});f.Choice=h}}return f};i.prototype._getFist=function(t,e,i){var s,n,r,l,f,u,a,o,h,c,p,d,v;v=t+((e!=null?e.length:void 0)?":"+e:"");if(!(v in this.fist)){if(i===true){return false}l={rnm:v,nm:t,row:e,ht:{},db:{},st:"new",sp:E.fistDef[t]};h=l.sp.FIELDS;for(f=0,u=h.length;f<u;f++){r=h[f];n=E.merge({},E.fieldDef[r],{nm:r,fistNm:t,row:e,id:"U"+E.nextCounter()});if(n.type==="yesno"){if(n.cdata==null){n.cdata=["Y",""]}if(n["default"]==null){n["default"]=n.cdata[1]}}n.h2h=function(){switch(E.type_oau(n.h2h)){case"S":return n.h2h.split(/[:,]/);case"A":return n.h2h;default:return[]}}();l.ht[r]=l.db[n.db_nm]=n}c=l.ht;for(r in c){o=c[r];if(o.confirm!=null){l.ht[o.confirm].confirm_src=r}}this.fist[v]=l}else{l=this.fist[v]}if(l.st==="new"){s=(p=E[E.appFist(t)]().fistGetValues(t,e))!=null?p:{};d=l.db;for(a in d){n=d[a];n.hval=E.fistD2H(n,s[a])}l.st="loaded"}return l};i.prototype._getChoices=function(t,e,i){var s,n,r,l,f,u,a,o,h,c,p,d,v,m;u=[];v=[];switch(t){case"array":o=i.cdata;for(s=0,r=o.length;s<r;s++){a=o[s];if(typeof a==="object"){u.push(String(a[1]));v.push(String(a[0]))}else{u.push(String(a));v.push(String(a))}}return{options:u,values:v};case"wist":h=i.cdata.split(":"),m=h[0],d=h[1],f=h[2];c=E.Wist(m);for(n=0,l=c.length;n<l;n++){p=c[n];u.push(p[f]);v.push(p[d])}return{options:u,values:v};case"custom":return E[E.appFist(e.nm)]().fistGetChoices(e.nm,i.nm,e.row)}};return i}(E.ModelJS);E.fistH2H=function(t,e){var i,s,n,r;e=E.fistH2H$pre(t,e);n=t.h2h;for(i=0,s=n.length;i<s;i++){r=n[i];e=E["fistH2H$"+r](t,e)}return e};E.fistH2H$pre=function(t,e){return e};E.fistH2D=function(t,e){if(t.h2d){return E["fistH2D$"+t.h2d](t,e)}else{return e}};E.fistD2H=function(t,e){var i;if(t.d2h){return E["fistD2H$"+t.d2h](t,e)}else{return(i=e!=null?e:t["default"])!=null?i:""}};E.fistVAL=function(t,e){var i,s,n,r,l;delete t.issue;i=true;if(e.length===0){if(t.req===true){i=t.req_text?["FIELD_EMPTY_TEXT",t.nm,(s=t.label)!=null?s:t.nm,t.req_text]:["FIELD_EMPTY",t.nm,(n=t.label)!=null?n:t.nm]}}else{if(t.validate){i=E["fistVAL$"+t.validate](t,e);if(i===false){i="FIELD_ISSUE"+(t.issue_text?"_TEXT":"")}}}if(i!==true){l=i;if("A"!==E.type_oau(l)){l=[l,t.nm,(r=t.label)!=null?r:t.nm,t.issue_text]}t.issue=new E.Issue(t.fistNm,t.nm);t.issue.add(l[0],l.slice(1))}return i===true};E.fistVAL$test=function(t,e){var i;i=t.validate_expr;if(typeof i==="string"){i=new RegExp(i)}return i.test(e)};E.Model.Fist$Base=t}).call(this);

/*Base/Model/Tab*/(function(){"use strict";var t,e=function(t,e){for(var a in e){if(r.call(e,a))t[a]=e[a]}function o(){this.constructor=t}o.prototype=e.prototype;t.prototype=new o;t.__super__=e.prototype;return t},r={}.hasOwnProperty;t=function(t){e(r,t);function r(t,e){r.__super__.constructor.call(this,t,e);this.tabs=E.merge({Modal:{backdrop:false}},e)}r.prototype.event=function(t,e,r,a,o){var i,s,l;s=this._getTab(r,a);e=(l=s.TYPE)!=null?l:r;switch(e.toUpperCase()){case"MODAL":i=this._toggleModal(s,a);break;case"DROP":case"COLLAPSE":i=this._toggleDrop(s,a);break;default:i=this._setTab(s,a)}if(i){return this.invalidateTables([r])}};r.prototype.action=function(t,e,a){var o,i,s,l;switch(e){case"toggle":this.event("Tab","click",a.group,a.item,a);break;case"clear_modal":s="Modal";i=this._getTab(s);o=false;for(l in i){if(l!=="backdrop"&&i[l]===true){i.backdrop=i[l]=false;o=true}}if(o){this.invalidateTables([s])}break;case"clear_drop":s="Drop";i=this._getTab(s);o=false;for(l in i){if(i[l]===true){i[l]=false;o=true}}if(o){this.invalidateTables([s])}break;case"clear":this.event("Tab","click",a.group,"_CLEARED",a);break;default:return r.__super__.action.call(this,t,e,a)}};r.prototype.loadTable=function(t){var e;e=this._getTab(t);return this.Table[t]=[e]};r.prototype._getTab=function(t,e){var r,a;if((r=this.tabs)[t]==null){r[t]={}}if(e!=null){if((a=this.tabs[t])[e]==null){a[e]=false}}return this.tabs[t]};r.prototype._toggleModal=function(t,e){var r,a,o;if(e==="_CLEARED"){r=false;for(a in t){if(a!=="backdrop"&&t[a]===true){r=true;t.backdrop=t[a]=false}}}else if(t[e]!==true){r=true;o=t.backdrop=t[e]=true;for(a in t){if(a!=="backdrop"&&a!==e&&t[a]===true){t[a]=false}}}return r};r.prototype._toggleDrop=function(t,e){var r,a,o;if(e==="_CLEARED"){r=false;for(a in t){if(t[a]===true){r=true;t[a]=false}}}else{r=true;o=t[e]=!t[e];if(o===true){for(a in t){if(a!==e&&t[a]===true){t[a]=false}}}}return r};r.prototype._setTab=function(t,e){var r;if(t[e]===true){return false}for(r in t){t[r]=false}t[e]=true;return true};return r}(E.ModelJS);E.Model.Tab$Base=t;E.ex$collapse=function(t,e,r,a,o,i){var s,l,n,u;u=a.split(":"),s=u[0],n=u[1];l=E.Tab(s)[0][n]?t.scrollHeight:0;return t.style.maxHeight=String(l)+"px"}}).call(this);

/*Base/Model/View*/(function(){"use strict";var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){for(var i in e){if(n.call(e,i))t[i]=e[i]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t},n={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++){if(e in this&&this[e]===t)return e}return-1};t=function(t){i(n,t);function n(t,i){this.ex=e(this.ex,this);this.T_if=e(this.T_if,this);this.T_page=e(this.T_page,this);this.handleIt=e(this.handleIt,this);var r,s,o;n.__super__.constructor.call(this,t,i);r=E.appGetSetting("frames");this.frames=function(){var t,e,i,n;i=function(){var t;t=[];for(o in r){t.push(o)}return t}().sort();n=[];for(t=0,e=i.length;t<e;t++){s=i[t];n.push(r[s])}return n}();this.frames.push("X");this.did_run=false;this.in_run=false;if(typeof window!=="undefined"&&window!==null){window.oE=this}this.defer_it_cnt=0;this.start=false}n.prototype.nest_up=function(t){if(this.defer_it_cnt===0){if(this.in_run){BLOWUP()}this.in_run=true;this.defer_it={promise:null,resolve:null};this.defer_it.promise=new Promise(function(t){return function(e,i){return t.defer_it.resolve=e}}(this))}return this.defer_it_cnt++};n.prototype.nest_dn=function(t){if(this.defer_it_cnt>0){this.defer_it_cnt--}if(this.defer_it_cnt===0){this.in_run=false;return this.defer_it.resolve([this.modal,this.defer_content])}};n.prototype.run=function(){var t,e,i,n,r,s,o,l,a;a="R";n=E.App().getStepPath(),t=n[0],l=n[1],o=n[2];if(i=E.appFindAttr(t,l,o,"modal")){i=(r=E.appGetSetting("modals")[i])!=null?r:i}e=i!=null?i:E.appGetSetting("layout",t,l,o);this.N={};this.modal=i?true:false;this.page_name=(s=E.appGetS(t,l,o).page)!=null?s:o;this.did_run=true;this.frames[this.frames.length-1]=e;this.frame_inx=0;this.resetInfo();this.nest_up(a);this.defer_content=this.kids([["page",{}]]);this.nest_dn(a);return this.defer_it.promise};n.prototype.resetInfo=function(){this.R={};this.I={};this.P=[{}]};n.prototype.saveInfo=function(){var t;t=E.merge({},{I:this.I,P:this.P});return t};n.prototype.restoreInfo=function(t){var e;this.resetInfo();this.P=t.P;this.I=t.I;for(e in this.I){if(!(e in this.R)){this.R[e]=this._getMyRow(this.I[e])}}};n.prototype._getMyRow=function(t){if(t.m!=null){return E[t.m](t.o)[t.c]}if(!(t.p in this.R)){this.R[t.p]=this._getMyRow(this.I[t.p])}if(t.p&&t.p in this.R){return this.R[t.p][t.o][t.c]}};n.prototype.getTable=function(t){var e,i,n,r,s;switch(t){case"If":return[this.N];case"Part":r={};s=this.P;for(e=0,i=s.length;e<i;e++){n=s[e];E.merge(r,n)}return[r];default:return[]}};n.prototype.invalidateTables=function(t,e,i){if(!(this.did_run&&i.length)){return}m.startComputation();m.endComputation()};n.prototype.handleIt=function(t){if(typeof t==="function"){t=t()}return t};n.prototype.formatFromSpec=function(t,e,i){var n,r,s,o;switch(e){case"":if(i){return E.custom_filter(t,i)}else{return t}break;case"count":return t!=null?t.length:void 0;case"bool":if(t){return true}else{return false}case"uriencode":return encodeURIComponent(t);case"quo":return t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"');case"1":return String(t)[0];case"lc":return String(t).toLowerCase();case"ucFirst":o=String(o).toLowerCase();return o.slice(0,1).toUpperCase()+o.slice(1);default:if(e[0]==="?"){r=e.slice(1).split("?"),n=r[0],s=r[1];return(t?n:s!=null?s:"").replace(new RegExp("[%]","g"),t)}}};n.prototype.v3=function(t,e,i,n,r){var s,o;s=E[t](e)[0];o=s[i];if(n!=null){return this.formatFromSpec(o,n,r)}else{return o}};n.prototype.v2=function(t,e,i,n){var r;if(e[0]==="_"){r=this.R[t]._[e.slice(1)]}else{r=this.R[t][e]}if(i!=null){return this.formatFromSpec(r,i,n)}else{return r}};n.prototype.weed=function(t){var e,i,n;e={};for(i in t){n=t[i];if(i[0]!=="?"){e[i]=n}else{if(n){e[i.slice(1)]=n}}}return e};n.prototype.kids=function(t){var e,i,n,r,s,o,l;l="K";o=[];for(n=i=0,s=t.length;i<s;n=++i){r=t[n];if("A"===E.type_oau(r)){o.push(n);e=this["T_"+r[0]](r[1],r[2]);if(e!=null?e.then:void 0){this.nest_up(l);(function(t){return function(i){return e.then(function(e){o[i]=e;return t.nest_dn(l)},function(e){console.error("kids",e);o[i]=e.message;return t.nest_dn(l)})}})(this)(n)}else{o[n]=e}}else{o.push(r)}}return o};n.prototype.loadPartAttrs=function(t,e){var i,n,r;n={};for(i in t){r=t[i];if("data-e-"!==i.slice(0,7)){continue}n[e?i:i.slice(7)]=r}return n};n.prototype.T_page=function(t){var e,i,n;if(this.frame_inx<this.frames.length){e=E.oLoader.d_layout(i=this.frames[this.frame_inx++]);n=(this.frame_inx<this.frames.length?"Frame":"Layout")+"/"+i}else{e=E.oLoader.d_page(i=this.page_name);n="Page/"+i}return this.piece_handle(n,t!=null?t:{},e)};n.prototype.T_part=function(t){var e,i;i=t.part;e=E.oLoader.d_part(i);return this.piece_handle("Part/"+i,t,e,true)};n.prototype.piece_handle=function(t,e,i,n){var r,s;if(i!=null?i.then:void 0){return this.D_piece(t,e,i,n)}r=i.content;s=this.saveInfo();this.P.push(this.loadPartAttrs(e));r=this.handleIt(r);this.restoreInfo(s);return r};n.prototype.D_piece=function(t,e,i,n){var r,s,o;o="P";this.nest_up(o+t);s=this.saveInfo();r=i.then(function(i){return function(r){var l;try{if(r!=null?r.then:void 0){BLOWUP()}i.restoreInfo(s);l=i.piece_handle(t,e,r,n);return l}finally{i.nest_dn(o+t)}}}(this),function(i){return function(n){console.error("D_piece",n);i.nest_dn(o+t+" IN-ERROR");return typeof i._Err==="function"?i._Err("tag","page/part",e,n):void 0;throw n}}(this));return r};n.prototype.T_if_true=function(t,e){if(this.N[t.name]){return this.handleIt(e())}else{return""}};n.prototype.T_if_false=function(t,e){if(this.N[t.name]){return""}else{return this.handleIt(e)}};n.prototype.T_if=function(t,e){var i,n,s,o,l;n=false;i=false;if("val"in t){if("eq"in t){if(t.val===t.eq){i=true}}else if("ne"in t){if(t.val!==t.ne){i=true}}else if("gt"in t){if(t.val>t.gt){i=true}}else if("in_list"in t){if(s=t.val,r.call(t.in_list.split(","),s)>=0){i=true}}else if("not_in_list"in t){if(o=t.val,r.call(t.not_in_list.split(","),o)<0){i=true}}else{n=true}}else if("set"in t){i=t.set?true:false}else if("not_set"in t){i=t.not_set?false:true}else if("table_is_empty"in t){l=this._accessModelTable(t.table_is_empty,false);if(!l.length){i=true}}else if("table_is_not_empty"in t){l=this._accessModelTable(t.table_is_not_empty,false);if(l.length){i=true}}else{n=true}if(n){console.error("ISSUE T_if",t)}if("name"in t){this.N[t.name]=i}if(i&&e){return this.handleIt(e)}else{return""}};n.prototype._accessModelTable=function(t,e){var i,n,r,s,o,l;n=t.split("/"),i=n[0],r=n[1];if(i in this.R){l=this.R[i][r];o={p:i}}else{l=E[i](r);o={m:i}}if(e===false){return l}s=e!=null?e:r;if(l.length===0){return[l,s]}o.o=r;this.I[s]=o;return[l,s]};n.prototype.T_foreach=function(t,e){var i,n,r,s,o,l,a,u,f;o=this._accessModelTable(t.table,t.alias),f=o[0],a=o[1];if(f.length===0){return""}l=[];s="limit"in t?Number(t.limit)-1:f.length;for(i=n=0,r=f.length;n<r;i=++n){u=f[i];u._={count:i,first:i===0,last:i===s-1,break:false};this.R[a]=u;this.I[a].c=i;l.push(this.handleIt(e))}delete this.I[a];delete this.R[a];return l};n.prototype.T_fist=function(t,e){var i,n,r,s,o,l,a,u,f,h,p,c,_,d,m,v,g,y,I,R;r=E.fistDef[t.fist];l=(u=r.event)!=null?u:"Fist";I=t.fist+(((f=t.row)!=null?f.length:void 0)?":"+t.row:"");y=(h=(p=t.via)!=null?p:r.via)!=null?h:"Control";o="__Fist";c=this._accessModelTable(l+"/"+I,o),R=c[0],g=c[1];this.R[g]=R[0];this.I[g].c=0;v=g;n=e?e:(a=(_=(d=t.part)!=null?d:r.part)!=null?_:"fist_default",t.part!=null?t.part:t.part=(m=r.part)!=null?m:"fist_default",function(e){return function(){return e.kids([["part",E.merge({part:a},e.loadPartAttrs(t,true))]])}}(this));s={table:o+"/"+y};if(t.alias!=null){s.alias=t.alias}i=this.T_foreach(s,n);delete this.R[v];delete this.I[v];return i};n.prototype.ex=function(t,e,i){var n,r,s,o,l,a,u,f,h,p,c,_;n=t.attributes;c=[];for(l=o=0,h=n.length;0<=h?o<h:o>h;l=0<=h?++o:--o){if(!("data-ex-"===n[l].name.slice(0,8))){continue}p=n[l].name.split("-"),r=p[0],s=p[1],a=p[2],u=p[3],f=p[4];_=n[l].value;c.push(E["ex$"+a](t,e,i,_,u,f))}return c};return n}(E.ModelJS);E.Model.View$Base=t}).call(this);

/*Base/Model/Wist*/(function(){"use strict";var t,i=function(t,i){for(var r in i){if(o.call(i,r))t[r]=i[r]}function n(){this.constructor=t}n.prototype=i.prototype;t.prototype=new n;t.__super__=i.prototype;return t},o={}.hasOwnProperty;t=function(t){i(o,t);function o(t,i){o.__super__.constructor.call(this,t,i);this.wist={}}o.prototype.loadTable=function(t){return this.Table[t]=this._getWist(t).table};o.prototype._getWist=function(t){var i,o,r,n;if(!(t in this.wist)){i=E.wistDef[t];n=[];for(o in i){r=i[o];r.token=String(o);n.push(r)}this.wist[t]={hash:i,table:n}}return this.wist[t]};return o}(E.ModelJS);E.Model.Wist$Base=t}).call(this);

/*Base/Extra/dataAction*/(function(){"use strict";var t,i=[].indexOf||function(t){for(var i=0,n=this.length;i<n;i++){if(i in this&&this[i]===t)return i}return-1};t=function(t,i,n){var e,f,r,c,l,a,s,u,o,v,h,p,k;if(typeof(f=E.option).activity==="function"){f.activity(t)}e=i.split(",");r=true;v=false;for(l=0,u=e.length;l<u;l++){o=e[l];h=o.split(":"),k=h[0],p=h[1],c=h[2],s=h[3],a=h[4];if(!p){p=k;k="click"}if(k==="event"){E.event(p,t,c,s,a,n)}if(r&&k===t){if(k==="click"||k==="rclick"){v=true}r=false;E.action(p,n)}}return v};E.Extra.dataAction$Base=t;E.event=function(t,n,e,f,r,c){var l,a;if(r!=="all"){l=r.split("-");if(i.call(l,n)<0){return}}if(t==="Fist"){t=(a=E.fistDef[e].event)!=null?a:t}return E[t]().event(t,n,e,f,c)}}).call(this);

/*Base/Extra/LoadStrategy*/(function(){"use strict";var t;t=function(){function t(t){var r;this.reverse_packages=function(){var e,o,a;a=[];for(r=e=o=t.length-1;o<=0?e<=0:e>=0;r=o<=0?++e:--e){a.push(t[r])}return a}()}t.prototype.getArtifact=function(t,r){var e,o,a,n,i,s,u,f;f=false;n=this.reverse_packages;for(e=0,o=n.length;e<o;e++){a=n[e];f=(i=(s=E["view$"+a])!=null?(u=s[r])!=null?u[t]:void 0:void 0)!=null?i:false;if(f!==false){break}}if(f===false){console.error("NO FILE FOUND! "+t)}return f};t.prototype.D_loadAsync=function(){return Promise.resolve()};t.prototype.d_layout=function(t){return this.getArtifact(t,"Layout")};t.prototype.d_page=function(t){return this.getArtifact(t,"Page")};t.prototype.d_part=function(t){return this.getArtifact(t,"Part")};return t}();E.Extra.LoadStrategy$Base=t;E.opt({loader:"LoadStrategy$Base"})}).call(this);

/*Base/Extra/RenderStrategy*/(function(){"use strict";var t,e,i,n=function(t,e){return function(){return t.apply(e,arguments)}};t=13;e=27;i=function(){function i(){this.m_redraw=n(this.m_redraw,this);this.onPopState=n(this.onPopState,this);this.handleEvent=n(this.handleEvent,this);var t,e,i;this.hash_prefix="#!/";this.very_first=true;this.was_popped=false;this.was_modal=false;this.touchEndIsClick=false;this.touchBoundary=10;this.last_path="not_set";this.unloadMsgs={};this.baseUrl=window.document.location.pathname;this.baseId="epic-new-page";this.modalId="epic-new-modal";t=document.createElement("div");t.id=this.baseId;document.body.appendChild(t);e=document.createElement("div");e.id=this.modalId;document.body.appendChild(e);setTimeout(function(t){return function(){return t.onPopState(true)}}(this),0);window.onpopstate=this.onPopState;this.redraw_guard=0;i=m.redraw.strategy;m.redraw=this.m_redraw;m.redraw.strategy=i;this.init();true}i.prototype.handleEvent=function(i){var n,a,r,s,o,h,u,d,c,l,f,p,m,w,g,_,y,v,b,k,I,S;if(i==null){i=window.event}b=i.type;if(b==="input"){b="change"}if(b==="mousedown"){if(i.which===1||i.button===1){b="click"}else if(i.which===3||i.button===2){b="rclick"}else{return}}if(b==="keyup"&&i.keyCode===9){return}switch(b){case"keyup":switch(i.keyCode){case t:b="enter";break;case e:b="escape"}break;case"touchstart":v=event.targetTouches[0];this.touchEndIsClick=[v.pageX,v.pageY];return true;case"touchmove":if(this.touchEndIsClick!==false){m=this.touchEndIsClick,I=m[0],S=m[1];v=event.targetTouches[0];if(Math.abs(v.pageX-I)>this.touchBoundary||Math.abs(v.pageY-S)>this.touchBoundary){this.touchEndIsClick=false}}return true;case"touchend":if(this.touchEndIsClick!==false){b="click"}this.touchEndIsClick=false}y=i.target;if(y===window){return false}while(y.tagName!=="BODY"&&!(a=y.getAttribute("data-e-action"))){y=y.parentElement}E.option.event(b,i,y,a);if(!a){return false}r={};n=y.attributes;for(h=o=0,w=n.length;0<=w?o<w:o>w;h=0<=w?++o:--o){if(!("data-e-"===n[h].name.slice(0,7))){continue}if("action"===(c=n[h].name.slice(7))){continue}r[c]=n[h].value}k=y.value;if(y.type==="checkbox"&&y.checked===false){k=false}s=y.files;r.val=k;r._files=s;g=["touches","changedTouches","targetTouches"];for(u=0,d=g.length;u<d;u++){c=g[u];if(c in i){r[c]=i[c]}}l=y.getAttribute("data-params");if(l){_=JSON.parse(l);for(c in _){p=_[c];r[c]=p}}f=E.Extra[E.option.dataAction](b,a,r);if(f){i.preventDefault()}return false};i.prototype.init=function(){var t,e,i,n,a;i=["mousedown","dblclick","keyup","blur","focus","change","input","touchstart","touchmove","touchend"];a=[];for(e=0,n=i.length;e<n;e++){t=i[e];a.push(document.body.addEventListener(t,this.handleEvent,true))}return a};i.prototype.UnloadMessage=function(t,e){var i,n,a;if(e){this.unloadMsgs[t]=e}else{delete this.unloadMsgs[t]}i=function(){var t,e;t=this.unloadMsgs;e=[];for(n in t){a=t[n];e.push(a)}return e}.call(this);i=i.length?i.join("\n"):null;return window.onbeforeunload=function(){return i}};i.prototype.onPopState=function(t){if(t===true||!t.state){if(this.was_popped||!this.very_first){E.action("browser_rehash",{hash:location.hash.substr(this.hash_prefix.length)});return}}this.was_popped=true;if(this.very_first){E.action("browser_hash",{hash:location.hash.substr(this.hash_prefix.length)})}else{if(t.state){E.setModelState(t.state)}m.startComputation();m.endComputation();E.action("browser_navhash",{hash:location.hash.substr(this.hash_prefix.length)})}};i.prototype.m_redraw=function(){this.redraw_guard++;if(this.redraw_guard!==1){return}return E.View().run().then(function(t){return function(e){var i,n;n=e[0],i=e[1];t.render(n,i);t.redraw_guard--;if(t.redraw_guard!==0){t.redraw_guard=0;return setTimeout(function(){return t.m_redraw()},16)}}}(this)).then(null,function(t){return function(t){return console.error("RenderStrategy$Base m_redraw",t)}}(this))};i.prototype.render=function(t,e){var i;if(t){m.render(i=document.getElementById(this.modalId),e)}else{if(this.was_modal){m.render(document.getElementById(this.modalId),[])}m.render(i=document.getElementById(this.baseId),m("div",{},e))}if(!t){this.handleRenderState()}this.was_modal=t;this.was_popped=false;this.very_first=false};i.prototype.handleRenderState=function(){var t,e,i,n,a,r,s,o,h;s=E.App().getStepPath();h=s.join("/");n=h===this.last_path?"replace":true;if(!n){return}i="";r=false;o=E.appFindAttr(s[0],s[1],s[2],"route");if(E.type_oau(o)==="O"&&"model"in o){r=E[o.model]().route(o)}if(typeof o==="string"){r=o}if(r!==false){i=r}a=E.getModelState();if(window.location.protocol!=="file:"){if(this.very_first||n==="replace"){if(typeof(t=window.history).replaceState==="function"){t.replaceState(a,i,this.hash_prefix+i)}}else if(!this.was_popped&&n===true){if(typeof(e=window.history).pushState==="function"){e.pushState(a,i,this.hash_prefix+i)}window.document.title=i}}this.last_path=h};return i}();E.Extra.RenderStrategy$Base=i}).call(this);

/*Base/Extra/RestAPI*/(function(){"use strict";var t;t=function(){function t(t){var e,o,r,n,s;this.opts={port:"",prefix:"",version:"",proto:"//",app_headers:{}};for(e in t){n=t[e];this.opts[e]=n}o=String(this.opts.port);if(o.length){o=":"+o}if(this.opts.prefix.length){r="/"+this.opts.prefix}if(this.opts.version.length){s="/"+this.opts.version}this.route_prefix=""+this.opts.proto+this.opts.host+(o!=null?o:"")+(r!=null?r:"")+(s!=null?s:"")+"/";this.SetToken(false)}t.prototype.GetPrefix=function(){return this.route_prefix};t.prototype.GetToken=function(){return this.token};t.prototype.SetToken=function(t){this.token=t};t.prototype.D_Request=function(t,e,o,r){var n,s,u;n=E.merge({},this.opts.app_headers,r!=null?r:{});u={code:false,text:false,ok:false};s=new Promise(function(r){return function(s,i){var p,a,f,h;h=new XMLHttpRequest;h.onloadend=function(t){var e,o;u.code=h.status;u.text=h.statusText;u.xhr=h;if(h.status===200){u.ok=true}if(!h.responseText.length){u.text="NetworkError";o='{"error":"NETWORK_ERROR"}'}else{o=h.responseText}e=JSON.parse(o);return s({status:u,data:e})};h.open(t,r.route_prefix+e);for(a in n){f=n[a];h.setRequestHeader(a,f)}p=new FormData;for(a in o){f=o[a];p.append(a,f)}return h.send(p)}}(this));return s.then(function(t){return t})};t.prototype.D_Get=function(t,e){return this.D_RequestAuth("GET",t,e)};t.prototype.D_Post=function(t,e){return this.D_RequestAuth("POST",t,e)};t.prototype.D_Del=function(t,e){return this.D_RequestAuth("DEL",t,e)};t.prototype.D_Put=function(t,e){return this.D_RequestAuth("PUT",t,e)};t.prototype.D_RequestAuth=function(t,e,o,r){var n,s;s=this.GetToken();if(s===false){setTimeout(function(){return E.action("Request.no_token")},0);return Promise.resolve({status:{code:401,text:"NO_TOKEN",ok:false},data:{error:"TOKEN"}})}n=E.merge({},this.opts.app_headers,r!=null?r:{});n.Authorization=s.token_type+" "+s.access_token;return this.D_Request(t,e,o,n).then(function(t){return function(t){if(t.status.code===401){setTimeout(function(){return E.action("Request.bad_token")},0);return{status:{code:401,text:"BAD_TOKEN",ok:false},data:{error:"TOKEN"}}}return t}}(this))};return t}();E.Extra.RestAPI$Base=t}).call(this);

E.view$Base={
Layout: {
"default":{preloaded:1,content:function(){return oE.kids([['page',{}]])}}},
Page: {
"default":{preloaded:1,content:function(){return [{tag:'b',attrs:{},children:['A Base Page']}]}}},
Part: {
}};

