#!/bin/sh

EpicMvc=$1
MinHtml=$2

if [ ! -d $MinHtml/js ] ; then mkdir $MinHtml/js ; fi
cat \
$EpicMvc/Epic.coffee \
$EpicMvc/util.coffee \
$EpicMvc/ModelJS.coffee \
$EpicMvc/Issue.coffee \
$EpicMvc/Request.coffee \
$EpicMvc/AppConf.coffee \
$EpicMvc/ClickAction.coffee \
$EpicMvc/ConfExe.coffee \
$EpicMvc/ViewExe.coffee \
$EpicMvc/FistGroupCache.coffee \
$EpicMvc/Fist.coffee \
$EpicMvc/FistFilt.coffee \
| grep -v "'use strict'" > EpicMvc-tmp0.coffee
coffee -c EpicMvc-tmp0.coffee
cat copyright.js EpicMvc-tmp0.js > EpicMvc-tmp.js
uglifyjs EpicMvc-tmp.js > $MinHtml/js/EpicMvc-min.js
rm EpicMvc-tmp0.*
